(function(M,w){typeof exports=="object"&&typeof module!="undefined"?w(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],w):(M=typeof globalThis!="undefined"?globalThis:M||self,w(M["vue-baidu-map-3x"]={},M.Vue))})(this,function(M,w){"use strict";var Zt={"bm-map":["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],"bm-geolocation":["locationSuccess","locationError"],"bm-overview-map":["viewchanged","viewchanging"],"bm-marker":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],"bm-polyline":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-polygon":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-circle":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-label":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],"bm-info-window":["close","open","maximize","restore","clickclose"],"bm-ground":["click","dblclick"],"bm-autocomplete":["onconfirm","onhighlight"],"bm-point-collection":["click","mouseover","mouseout"]};function W(t,n){const e=n||Zt[this.$options.name];e&&e.forEach(s=>{let h=s.slice(0,2)==="on"?s.slice(2):s;const i=this.$attrs["on"+h.replace(h[0],h[0].toUpperCase())];i&&t.addEventListener(s,i)})}function E(t,n={}){const{lng:e,lat:s}=n;return new t.Point(e,s)}function U(t,n={}){const{sw:e,ne:s}=n;return new t.Bounds(E(t,e),E(t,s))}function A(t,n={}){const{width:e,height:s}=n;return new t.Size(e,s)}function H(t,n={}){const{url:e,size:s,opts:c={}}=n;let h={anchor:c.anchor&&A(t,c.anchor),imageSize:c.imageSize&&A(t,c.imageSize),imageOffset:c.imageOffset&&A(t,c.imageOffset),infoWindowAnchor:c.infoWindowAnchor&&A(t,c.infoWindowAnchor),printImageUrl:c.printImageUrl};return F(h),new t.Icon(e,A(t,s),h)}function jt(t,n={}){const{content:e,opts:s}=n;let c={offset:s.offset&&A(t,s.offset),position:s.position&&E(t,s.position),enableMassClear:s.enableMassClear};return F(c),new t.Label(e,c)}function Ht(t,n={}){const{path:e,opts:s}=n;let c={anchor:s.anchor&&A(t,s.anchor),fillColor:s.fillColor,fillOpacity:s.fillOpacity,scale:s.scale,rotation:s.rotation,strokeColor:s.strokeColor,strokeOpacity:s.strokeOpacity,strokeWeight:s.strokeWeight};return F(c),new t.Symbol(window[e]||e,c)}function Gt(t,n={}){const{symbol:e,offset:s,repeat:c,fixedRotation:h}=n;return new t.IconSequence(e&&Ht(t,e),s,c,h)}const R=t=>t.lng&&t.lat,ot=t=>Object.prototype.toString.call(t).slice(8,-1),z=(t,n)=>R(n)?E(t,n):n,F=t=>{Object.keys(t).forEach(n=>{typeof t[n]=="undefined"&&delete t[n]})};let q={v:"3.0",type:"API"};const st=(t={})=>{q=Object.assign(q,t),q.ak||console.error("\u8BF7\u914D\u7F6Eak\uFF1A\u767E\u5EA6\u5730\u56FE\u5F00\u53D1\u8005\u5E73\u53F0\u7533\u8BF7\u7684\u5BC6\u94A5")},N=()=>q;var j=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Q={exports:{}};function tt(){}tt.prototype={on:function(t,n,e){var s=this.e||(this.e={});return(s[t]||(s[t]=[])).push({fn:n,ctx:e}),this},once:function(t,n,e){var s=this;function c(){s.off(t,c),n.apply(e,arguments)}return c._=n,this.on(t,c,e)},emit:function(t){var n=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),s=0,c=e.length;for(s;s<c;s++)e[s].fn.apply(e[s].ctx,n);return this},off:function(t,n){var e=this.e||(this.e={}),s=e[t],c=[];if(s&&n)for(var h=0,i=s.length;h<i;h++)s[h].fn!==n&&s[h].fn._!==n&&c.push(s[h]);return c.length?e[t]=c:delete e[t],this}},Q.exports=tt,Q.exports.TinyEmitter=tt;var Vt=Q.exports,X=new Vt,Z={$on:(...t)=>X.on(...t),$once:(...t)=>X.once(...t),$off:(...t)=>X.off(...t),$emit:(...t)=>X.emit(...t)};const at={API:{"2.0":{setMapStyle:"setMapStyle",NavigationControl:"NavigationControl"},"3.0":{setMapStyle:"setMapStyleV2",NavigationControl:"NavigationControl"}},WebGL:{setMapStyle:"setMapStyleV2",NavigationControl:"NavigationControl3D"}},G=t=>{const n=N();return n.type=="WebGL"?at[n.type][t]:at[n.type][n.v][t]};let rt,Ut=new Promise(t=>{rt=t});const qt=()=>Ut;function et(t){let n=[];return Object.keys(t).forEach(e=>{n.push(e+"="+t[e])}),n.join("&")}function Xt(t,n=[]){(!t.location||!t.location.length)&&console.error("\u8BF7\u4F20\u5165location");const e=N();return e.ak&&n.push(e.ak),new Promise((s,c)=>{if(n.length){let h=Object.assign({location:[],extensions_poi:1,output:"json",coordtype:"wgs84ll",timeout:60},t),i=0;const r=()=>{var p;const o=setTimeout(()=>{c(new Error("\u67E5\u8BE2\u8D85\u65F6"))},h.timeout*1e3),a="baiduReverse"+Math.floor(Math.random()*1e6);h.callback=a,window[a]=m=>{var l;clearTimeout(o),window[a]=null,(l=document.getElementById(a))==null||l.remove(),m.status?i<n.length*4?(i++,r()):c(new Error("\u67E5\u8BE2\u5931\u8D25")):s(m.result)},h.ak=n[i%n.length];let d=document.createElement("script");d.id=a,d.src=`https://api.map.baidu.com/reverse_geocoding/v3/?${et(h)}`,(p=document.getElementsByTagName("head")[0])==null||p.appendChild(d)};r()}else console.error("\u8BF7\u914D\u7F6E\u767E\u5EA6ak\uFF01"),c(new Error("\u8BF7\u914D\u7F6E\u767E\u5EA6ak\uFF01"))})}function Kt(t,n=[]){t.address||console.error("\u8BF7\u4F20\u5165address");const e=N();return e.ak&&n.push(e.ak),new Promise((s,c)=>{if(n.length){let h=Object.assign({address:"",output:"json",timeout:60},t),i=0;const r=()=>{var p;const o=setTimeout(()=>{c(new Error("\u67E5\u8BE2\u8D85\u65F6"))},h.timeout*1e3),a="baidugeocoding"+Math.floor(Math.random()*1e6);h.callback=a,window[a]=m=>{var l;clearTimeout(o),window[a]=null,(l=document.getElementById(a))==null||l.remove(),m.status?i<n.length*4?(i++,r()):c(new Error("\u67E5\u8BE2\u5931\u8D25")):s(m.result)},h.ak=n[i%n.length];let d=document.createElement("script");d.id=a,d.src=`https://api.map.baidu.com/geocoding/v3/?${et(h)}`,(p=document.getElementsByTagName("head")[0])==null||p.appendChild(d)};r()}else console.error("\u8BF7\u914D\u7F6E\u767E\u5EA6ak\uFF01"),c(new Error("\u8BF7\u914D\u7F6E\u767E\u5EA6ak\uFF01"))})}function Jt(t,n=[]){(!t.locations||!t.locations.length)&&console.error("\u8BF7\u4F20\u5165locations");const e=N();return e.ak&&n.push(e.ak),new Promise((s,c)=>{if(n.length){let h=Object.assign({locations:[],from:1,to:5,timeout:60},t),i=0;const r=()=>{var p;const o=setTimeout(()=>{c(new Error("\u67E5\u8BE2\u8D85\u65F6"))},h.timeout*1e3),a="baidugeoconv"+Math.floor(Math.random()*1e6);h.callback=a,window[a]=m=>{var l;clearTimeout(o),window[a]=null,(l=document.getElementById(a))==null||l.remove(),m.status?i<n.length*4?(i++,r()):c(new Error("\u67E5\u8BE2\u5931\u8D25")):s(m.result)},h.ak=n[i%n.length],h.coords=h.locations.join(";");let d=document.createElement("script");d.id=a,d.src=`https://api.map.baidu.com/geoconv/v1/?${et(h)}`,(p=document.getElementsByTagName("head")[0])==null||p.appendChild(d)};r()}else console.error("\u8BF7\u914D\u7F6E\u767E\u5EA6ak\uFF01"),c(new Error("\u8BF7\u914D\u7F6E\u767E\u5EA6ak\uFF01"))})}var D=(t,n)=>{const e=t.__vccOpts||t;for(const[s,c]of n)e[s]=c;return e};const Yt={name:"bm-map",inheritAttrs:!1,emits:["ready","init","animationed"],props:{ak:{type:String},v:{type:String},type:{type:String},center:{type:[Object,String]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},highResolution:{type:Boolean,default:!0},mapClick:{type:Boolean,default:!0},mapType:{type:String},dragging:{type:Boolean,default:!0},scrollWheelZoom:{type:Boolean,default:!1},doubleClickZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},inertialDragging:{type:Boolean,default:!0},continuousZoom:{type:Boolean,default:!0},pinchToZoom:{type:Boolean,default:!0},autoResize:{type:Boolean,default:!0},theme:{type:Array},mapStyle:{type:Object},hasAnimation:{type:Boolean,default:!0},defaultAnimation:{type:Boolean,default:!0},preserveDrawingBuffer:{type:Boolean,default:!1}},watch:{center(t,n){const{map:e,zoom:s}=this;ot(t)==="String"&&t!==n&&this.setCenterZoom(e,t,s)},"center.lng"(t,n){const{BMap:e,map:s,zoom:c,center:h}=this;t!==n&&t>=-180&&t<=180&&this.setCenterZoom(s,new e.Point(t,h.lat),c)},"center.lat"(t,n){const{BMap:e,map:s,zoom:c,center:h}=this;t!==n&&t>=-74&&t<=74&&this.setCenterZoom(s,new e.Point(h.lng,t),c)},zoom(t,n){const{map:e}=this;t!==n&&t>=3&&t<=19&&e.setZoom(t)},minZoom(t){const{map:n}=this;n.setMinZoom(t)},maxZoom(t){const{map:n}=this;n.setMaxZoom(t)},highResolution(){this.reset()},mapClick(){this.reset()},mapType(t){const{map:n}=this;n.setMapType(window[t])},dragging(t){const{map:n}=this;t?n.enableDragging():n.disableDragging()},scrollWheelZoom(t){const{map:n}=this;t?n.enableScrollWheelZoom():n.disableScrollWheelZoom()},doubleClickZoom(t){const{map:n}=this;t?n.enableDoubleClickZoom():n.disableDoubleClickZoom()},keyboard(t){const{map:n}=this;t?n.enableKeyboard():n.disableKeyboard()},inertialDragging(t){const{map:n}=this;t?n.enableInertialDragging():n.disableInertialDragging()},continuousZoom(t){const{map:n}=this;t?n.enableContinuousZoom():n.disableContinuousZoom()},pinchToZoom(t){const{map:n}=this;t?n.enablePinchToZoom():n.disablePinchToZoom()},autoResize(t){const{map:n}=this;t?n.enableAutoResize():n.disableAutoResize()},theme(t){const{map:n}=this;n[G("setMapStyle")]({styleJson:t})},mapStyle:{handler(t){const{map:n,theme:e}=this;!e&&n[G("setMapStyle")](t)},deep:!0}},methods:{setMapOptions(){const{map:t,minZoom:n,maxZoom:e,mapType:s,dragging:c,scrollWheelZoom:h,doubleClickZoom:i,keyboard:r,inertialDragging:o,continuousZoom:a,pinchToZoom:d,autoResize:p}=this;n&&t.setMinZoom(n),e&&t.setMaxZoom(e),s&&t.setMapType(window[s]),c?t.enableDragging():t.disableDragging(),h?t.enableScrollWheelZoom():t.disableScrollWheelZoom(),i?t.enableDoubleClickZoom():t.disableDoubleClickZoom(),r?t.enableKeyboard():t.disableKeyboard(),o?t.enableInertialDragging():t.disableInertialDragging(),a?t.enableContinuousZoom():t.disableContinuousZoom(),d?t.enablePinchToZoom():t.disablePinchToZoom(),p?t.enableAutoResize():t.disableAutoResize()},init(t){if(this.map)return;let n=this.$refs.view;const e=new t.Map(n,{enableHighResolution:this.highResolution,enableMapClick:this.mapClick,preserveDrawingBuffer:this.preserveDrawingBuffer});this.map=e;const{setMapOptions:s,zoom:c,getCenterPoint:h,theme:i,mapStyle:r}=this;s(),W.call(this,e),e.reset(),this.setCenterZoom(e,h(),c),i?e[G("setMapStyle")]({styleJson:i}):r&&e[G("setMapStyle")](r);let o=0;this.$emit("init",{BMap:t,map:e}),Z.$emit("init",{BMap:t,map:e}),e.addEventListener("tilesloaded",()=>{o||(o++,this.$emit("ready",{BMap:t,map:e}),Z.$emit("ready",{BMap:t,map:e}))}),e.addEventListener("loaded",()=>{this.$emit("loaded",{BMap:t,map:e}),Z.$emit("loaded",{BMap:t,map:e})})},setCenterZoom(t,n,e){N().type==="WebGL"&&(!this.hasAnimation||!this.defaultAnimation)?t.setCenter(n,{noAnimation:!this.hasAnimation,callback:()=>{t.setZoom(e,{noAnimation:!this.hasAnimation,zoomCenter:n,callback:()=>{this.$emit("animationed",{BMap:this.BMap,map:t})}})}}):t.centerAndZoom(n,e)},getCenterPoint(){const{center:t,BMap:n}=this;switch(ot(t)){case"String":return t;case"Object":return new n.Point(t.lng,t.lat);default:return new n.Point}},initMap(t){this.BMap=t,this.init(t),rt(t)},getMapScript(){return window.BMap?window.BMap._preloader?window.BMap._preloader:Promise.resolve(window.BMap):(window.BMap={},window.BMap._preloader=new Promise((t,n)=>{window._initBaiduMap=function(){window.BMap=N().type=="WebGL"?window.BMapGL:window.BMap,t(window.BMap),window.document.body.removeChild(e),window.BMap._preloader=null,window._initBaiduMap=null};const e=document.createElement("script");switch(window.document.body.appendChild(e),N().type){case"WebGL":e.src=`https://api.map.baidu.com/api?v=1.0&type=webgl&ak=${N().ak}&callback=_initBaiduMap`;break;default:e.src=`https://api.map.baidu.com/api?v=${N().v}&ak=${N().ak}&callback=_initBaiduMap`}}),window.BMap._preloader)},reset(){const{getMapScript:t,initMap:n}=this;t().then(n)}},created(){const t={};this.ak&&(t.ak=this.ak),this.v&&(t.v=this.v),this.type&&(t.type=this.type),st(t)},mounted(){this.reset()},data(){return{hasBmView:!1,map:null,BMap:null,name:"bm-map"}}},Qt={key:0,ref:"view",style:{width:"100%",height:"100%"}};function te(t,n,e,s,c,h){return w.openBlock(),w.createElementBlock("div",{class:w.normalizeClass(t.$attrs.class),style:w.normalizeStyle(t.$attrs.style)},[c.hasBmView?w.createCommentVNode("",!0):(w.openBlock(),w.createElementBlock("div",Qt,null,512)),w.renderSlot(t.$slots,"default")],6)}var lt=D(Yt,[["render",te]]);const ee={control:{unload:"removeControl"},layer:{unload:"removeTileLayer"},overlay:{unload:"removeOverlay"},contextMenu:{unload:"removeContextMenu"}},K=t=>t.abstract||t.name!=="bm-map"?K(t.$parent):t;function ne(){const{unload:t,renderByParent:n,$parent:e,ready:s}=this;Z.$off("ready",s),n&&e.reload(),t()}const ie=(t={})=>({emits:["ready","init"],computed:{renderByParent(){return this.$parent.preventChildrenRender}},created(){const n=K(this.$parent),e=n.map,{ready:s}=this;e?s():Z.$on("ready",s),e?this.init({BMap:n.BMap,map:e}):Z.$on("init",this.init)},mounted(){const e=K(this.$parent).map,{mountedReady:s}=this;e?s():Z.$on("ready",s)},unmounted:ne,methods:{init(){},ready(){const n=K(this.$parent),e=this.BMap=n.BMap,s=this.map=n.map;this.load(),this.$emit("ready",{BMap:e,map:s})},mountedReady(){this.mountedLoad()},transmitEvent(n){this.$emit(n.type.replace(/^on/,""),n)},reload(){this&&this.BMap&&this.$nextTick(()=>{this.unload(),this.$nextTick(()=>{this.load(),this.mountedLoad()})})},unload(){const{map:n,originInstance:e}=this;try{switch(t.type){case"search":return e.clearResults();case"autoComplete":case"lushu":return e.dispose();case"markerClusterer":return e.clearMarkers();default:n[ee[t.type].unload](e)}}catch{}},mountedLoad(){}}});var x=t=>ie({type:t});const ct={name:"bm-scale",render(){},mixins:[x("control")],props:{anchor:{type:String},offset:{type:Object}},watch:{anchor(){this.reload()},offset(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:s}=this;this.originInstance=new t.ScaleControl({anchor:window[e],offset:s&&A(t,s)}),n.addControl(this.originInstance)}}},ht={name:"bm-navigation",render(){},mixins:[x("control")],props:{anchor:{type:String},offset:{type:Object},type:{type:String},showZoomInfo:{type:Boolean},enableGeolocation:{type:Boolean,default:!1}},watch:{anchor(){this.reload()},offset(){this.reload()},type(){this.reload()},showZoomInfo(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:s,type:c,showZoomInfo:h,enableGeolocation:i}=this;let r={anchor:window[e],offset:s&&A(t,s),type:window[c],showZoomInfo:h,enableGeolocation:i};F(r),this.originInstance=new t[G("NavigationControl")](r),n.addControl(this.originInstance)}}},dt={name:"bm-map-type",render(){},mixins:[x("control")],props:["type","mapTypes","anchor","offset"],watch:{anchor(){this.reload()},offset(){this.reload()},type(){this.reload()},mapTypes(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:s,type:c}=this,h=[];this.mapTypes&&this.mapTypes.forEach(r=>h.push(window[r]));let i={anchor:window[e],offset:s&&A(t,s),type:window[c],mapTypes:h};F(i),this.originInstance=new t.MapTypeControl(i),n.addControl(this.originInstance)}}},pt={name:"bm-overview-map",mixins:[x("control")],render(){},props:{anchor:{type:String},offset:{type:Object},size:{type:Object},isOpen:{type:Boolean}},watch:{anchor(){this.reload()},offset(){this.reload()},size(){this.reload()},isOpen(){this.reload()}},methods:{load(){const{BMap:t,map:n,isOpen:e,size:s,offset:c,anchor:h}=this;this.mapTypes&&this.mapTypes.forEach(r=>{});let i={anchor:window[h],offset:A(t,c),size:A(t,s),isOpen:e};F(i),this.originInstance=new t.OverviewMapControl(i),W.call(this,this.originInstance),n.addControl(this.originInstance)}}},ut={name:"bm-geolocation",render(){},mixins:[x("control")],props:{anchor:{type:String},offset:{type:Object},showAddressBar:{type:Boolean},autoLocation:{type:Boolean},locationIcon:{type:Object}},watch:{anchor(){this.reload()},offset(){this.reload()},showAddressBar(){this.reload()},autoLocation(){this.reload()},locationIcon(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,showAddressBar:s,autoLocation:c,locationIcon:h,offset:i}=this;let r={anchor:window[e],showAddressBar:s,enableAutoLocation:c,offset:i&&A(t,i),locationIcon:h&&H(t,h)};switch(F(r),N().type){case"WebGL":this.originInstance=new t.LocationControl(r);break;default:this.originInstance=new t.GeolocationControl(r)}W.call(this,this.originInstance),n.addControl(this.originInstance)}}},mt={name:"bm-copyright",render(){},mixins:[x("control")],props:["anchor","offset","copyright"],watch:{anchor(){this.reload()},offset(){this.reload()},copyright(){this.reload()}},methods:{load(){const{BMap:t,map:n,offset:e,anchor:s,updateCopyrightList:c}=this;this.originInstance=new t.CopyrightControl({anchor:window[s],offset:e&&A(t,e)}),c(),n.addControl(this.originInstance)},updateCopyrightList(){const{BMap:t,map:n}=this,{removeCopyright:e,getCopyrightCollection:s}=this.originInstance,c=s();c&&c.forEach(h=>{e(h.id)}),this.copyright&&this.copyright.forEach(h=>{const i=h.bounds?new t.Bounds(new t.Point(h.bounds.sw.lng,h.bounds.sw.lat),new t.Point(h.bounds.ne.lng,h.bounds.ne.lat)):n.getBounds();this.originInstance.addCopyright({id:h.id,content:h.content,bounds:i})})}}},gt={name:"bm-city-list",render(){},emits:["changeBefore","changeAfter"],mixins:[x("control")],props:{anchor:{type:String},offset:{type:Object}},watch:{anchor(){this.reload()},offset(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:s}=this,c=this;this.originInstance=new t.CityListControl({anchor:window[e],offset:s&&A(t,s),onChangeBefore(){c.$emit("changeBefore")},onChangeAfter(){c.$emit("changeAfter")}}),n.addControl(this.originInstance)}}},ft={name:"bm-panorama",mixins:[x("control")],render(){},props:["anchor","offset"],watch:{anchor(){this.reload()},offset(){this.reload()}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:s}=this;this.originInstance=new t.PanoramaControl({anchor:window[e],offset:s&&A(t,s)}),n.addControl(this.originInstance)}}},oe={name:"bm-control",mixins:[x("control")],props:["anchor","offset"],watch:{anchor(t){this.originInstance.setAnchor(t)},offset(t){this.originInstance.setOffset(t)}},methods:{load(){const{BMap:t,map:n,anchor:e,offset:s,$el:c}=this,h=function(){this.defaultAnchor=window[e||"BMAP_ANCHOR_TOP_LEFT"],this.defaultOffset=A(t,s)};h.prototype=new t.Control,h.prototype.initialize=i=>i.getContainer().appendChild(c),this.originInstance=new h(e,s),n.addControl(this.originInstance)}}};function se(t,n,e,s,c,h){return w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")])}var yt=D(oe,[["render",se]]),Ve="";const ae={name:"bm-marker",mixins:[x("overlay")],inject:{Cluster:{default:()=>({})}},props:{position:{},offset:{},icon:{},massClear:{type:Boolean,default:!0},dragging:{type:Boolean,default:!1},clicking:{type:Boolean,default:!0},raiseOnDrag:{type:Boolean,default:!1},draggingCursor:{type:String},rotation:{type:Number},shadow:{type:Object},title:{type:String},label:{type:Object},animation:{type:String},top:{type:Boolean,default:!1},zIndex:{type:Number,default:0}},watch:{"position.lng"(t,n){const{BMap:e,originInstance:s,position:c,renderByParent:h,$parent:i}=this;t!==n&&t>=-180&&t<=180&&s.setPosition(E(e,{lng:t,lat:c.lat})),h&&i.reload()},"position.lat"(t,n){const{BMap:e,originInstance:s,position:c,renderByParent:h,$parent:i}=this;t!==n&&t>=-74&&t<=74&&s.setPosition(E(e,{lng:c.lng,lat:t})),h&&i.reload()},"offset.width"(t,n){const{BMap:e,originInstance:s}=this;t!==n&&s.setOffset(new e.Size(t,this.offset.height))},"offset.height"(t,n){const{BMap:e,originInstance:s}=this;t!==n&&s.setOffset(new e.Size(this.offset.width,t))},icon:{deep:!0,handler(t){const{BMap:n,originInstance:e,rotation:s}=this;e&&e.setIcon(H(n,t)),s&&e&&e.setRotation(s)}},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},dragging(t){t?this.originInstance.enableDragging():this.originInstance.disableDragging()},clicking(){this.reload()},raiseOnDrag(){this.reload()},draggingCursor(t){this.originInstance.setDraggingCursor(t)},rotation(t){this.originInstance.setRotation(t)},shadow(t){this.originInstance.setShadow(t)},title(t){this.originInstance.setTitle(t)},label(t){this.reload()},animation(t){this.originInstance.setAnimation(window[t])},top(t){this.originInstance.setTop(t)},zIndex(t){this.originInstance.setZIndex(t)}},methods:{load(){var I,u;const{BMap:t,map:n,position:e,offset:s,icon:c,massClear:h,dragging:i,clicking:r,raiseOnDrag:o,draggingCursor:a,rotation:d,shadow:p,title:m,label:l,animation:f,top:y,renderByParent:_,$parent:g,zIndex:B}=this;let O={offset:s,icon:c&&H(t,c),enableMassClear:h,enableDragging:i,enableClicking:r,raiseOnDrag:o,draggingCursor:a,rotation:d,shadow:p,title:m};F(O);const P=new t.Marker(new t.Point(e.lng,e.lat),O);this.originInstance=P,l&&P&&P.setLabel(jt(t,l)),P.setTop(y),P.setZIndex(B),W.call(this,P),_?g.reload():n.addOverlay(P),P.setAnimation(window[f]),(u=(I=this.Cluster)==null?void 0:I.addMaker)==null||u.call(I,this)}},beforeUnmount(){var t,n;(n=(t=this.Cluster)==null?void 0:t.removeMaker)==null||n.call(t,this)}};function re(t,n,e,s,c,h){return w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")])}var vt=D(ae,[["render",re]]);const _t={render(){},name:"bm-point-collection",mixins:[x("overlay")],props:{points:{type:Array,default(){return[]}},shape:{type:String,default:"BMAP_POINT_SHAPE_CIRCLE"},color:{type:String},size:{type:String,default:"BMAP_POINT_SIZE_NORMAL"}},watch:{shape(t){const{originInstance:n,color:e,size:s}=this;n.setStyles({shape:window[t],color:e,size:window[s]})},size(t){const{originInstance:n,color:e,shape:s}=this;n.setStyles({shape:window[s],color:e,size:window[t]})},color(t){const{originInstance:n,shape:e,size:s}=this;n.setStyles({shape:window[e],color:t,size:window[s]})},points:{deep:!0,handler(t){const{originInstance:n}=this;n.clear(),n.setPoints(t)}}},methods:{load(){},init({BMap:t,map:n}){this.$emit("init",{BMap:t,map:n});const{points:e,shape:s,color:c,size:h}=this;let i={shape:window[s],color:c,size:window[h]};F(i);const r=this.originInstance=new t.PointCollection(e.map(o=>E(t,o)),i);W.call(this,r),n.addOverlay(r)}}},bt={name:"bm-polyline",render(){},mixins:[x("overlay")],props:{path:{type:Array},strokeColor:{type:String,default:"blue"},strokeWeight:{type:Number,default:2},strokeOpacity:{type:Number,default:.5},strokeStyle:{type:String,default:"solid"},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1},icons:{type:Array,default(){return[]}}},watch:{path:{handler(t,n){this.reload()},deep:!0},icons:{handler(t,n){this.reload()},deep:!0},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},editing(t){t?this.originInstance.enableEditing():this.originInstance.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},computed:{iconSequences(){const{BMap:t,icons:n}=this;return n.map(e=>Gt(t,e))}},methods:{load(){const{BMap:t,map:n,path:e,strokeColor:s,strokeWeight:c,strokeOpacity:h,strokeStyle:i,editing:r,massClear:o,clicking:a,iconSequences:d}=this;let p={strokeColor:s,strokeWeight:c,strokeOpacity:h,strokeStyle:i,enableEditing:r,enableMassClear:o,enableClicking:a,icons:d};F(p);const m=new t.Polyline(e.map(l=>E(t,{lng:l.lng,lat:l.lat})),p);this.originInstance=m,n.addOverlay(m),W.call(this,m)}}},nt={name:"bm-polygon",render(){},mixins:[x("overlay")],props:{path:{type:Array,default(){return[]}},strokeColor:{type:String},strokeWeight:{type:Number},strokeOpacity:{type:Number},strokeStyle:{type:String},fillColor:{type:String},fillOpacity:{type:Number},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1}},watch:{path:{handler(t,n){this.reload()},deep:!0},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},fillColor(t){this.originInstance.setFillColor(t)},fillOpacity(t){this.originInstance.setFillOpacity(t)},editing(t){t?this.originInstance.enableEditing():this.originInstance.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},methods:{load(){const{BMap:t,map:n,path:e,strokeColor:s,strokeWeight:c,strokeOpacity:h,strokeStyle:i,fillColor:r,fillOpacity:o,editing:a,massClear:d,clicking:p}=this;let m={strokeColor:s,strokeWeight:c,strokeOpacity:h,strokeStyle:i,fillColor:r,fillOpacity:o,enableMassClear:d,enableClicking:p};F(m);const l=new t.Polygon(e.map(f=>E(t,{lng:f.lng,lat:f.lat})),m);this.originInstance=l,n.addOverlay(l),W.call(this,l),a?l.enableEditing():l.disableEditing()}}},wt={name:"bm-circle",render(){},mixins:[x("overlay")],props:{center:{},radius:{},strokeColor:{type:String},strokeWeight:{type:Number},strokeOpacity:{type:Number},strokeStyle:{type:String},fillColor:{type:String},fillOpacity:{type:Number},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1}},watch:{"center.lng"(t,n){const{BMap:e,originInstance:s,isEditing:c,disableEditing:h,enableEditing:i,center:r,editing:o}=this;if(!c){h();const a=t;t.toString()!==n.toString()&&a>=-180&&a<=180&&s.setCenter(E(e,{lng:a,lat:r.lat})),o&&i()}},"center.lat"(t,n){const{BMap:e,originInstance:s,isEditing:c,disableEditing:h,enableEditing:i,center:r,editing:o}=this;if(!c){h();const a=t;t.toString()!==n.toString()&&a>=-74&&a<=74&&s.setCenter(E(e,{lng:r.lng,lat:a})),o&&i()}},radius(t,n){const{originInstance:e,isEditing:s,disableEditing:c,enableEditing:h,editing:i}=this;s||(c(),e.setRadius(t),i&&h())},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},fillColor(t){this.originInstance.setFillColor(t)},fillOpacity(t){this.originInstance.setFillOpacity(t)},editing(t){t?this.enableEditing():this.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},methods:{dragStartHandler(){this.isEditing=!0},dragEndHandler(){this.isEditing=!1,this.bindEditingNodeEvents()},bindEditingNodeEvents(){const{originInstance:t,editingKey:n,dragStartHandler:e,dragEndHandler:s}=this;t[n]&&t[n].forEach(c=>{c.addEventListener("dragstart",e),c.addEventListener("dragend",s)})},enableEditing(){const{originInstance:t,bindEditingNodeEvents:n}=this;t.enableEditing(),n()},disableEditing(){const{originInstance:t}=this;t.disableEditing()},getEditingKey(t){const n=[];t.enableEditing(),setTimeout(()=>{for(const e in t)t[e]&&t[e].length===2&&n.push(e);t.disableEditing();for(const e in t)t[e]&&t[e].length===0&&~n.indexOf(e)&&(this.editingKey=e)},0)},load(){const{BMap:t,map:n,center:e,radius:s,strokeColor:c,strokeWeight:h,strokeOpacity:i,strokeStyle:r,fillColor:o,fillOpacity:a,editing:d,massClear:p,clicking:m,enableEditing:l,disableEditing:f,getEditingKey:y,editingKey:_}=this;let g={strokeColor:c,strokeWeight:h,strokeOpacity:i,strokeStyle:r,fillColor:o,fillOpacity:a,enableMassClear:p,enableClicking:m};F(g);const B=new t.Circle(E(t,{lng:e.lng,lat:e.lat}),s,g);this.originInstance=B,n.addOverlay(B),W.call(this,B),!_&&y(B),setTimeout(()=>{d?l():f()},0)}}},Ct={name:"bm-ground",render(){},mixins:[x("overlay")],props:{bounds:{type:Object},opacity:{type:Number},imageURL:{type:String},displayOnMinLevel:{type:Number},displayOnMaxLevel:{type:Number}},watch:{bounds:{handler(t){const{BMap:n}=this;this.originInstance.setBounds(U(n,t))},deep:!0},opacity(t){this.originInstance.setOpacity(t)},imageURL(t){this.originInstance.setImageURL(t)},displayOnMinLevel(t){this.originInstance.setDisplayOnMinLevel(t)},displayOnMaxLevel(t){this.originInstance.setDisplayOnMaxLevel(t)}},methods:{load(){const{BMap:t,map:n,bounds:e,opacity:s,imageURL:c,displayOnMinLevel:h,displayOnMaxLevel:i}=this;let r={opacity:s,imageURL:c,displayOnMaxLevel:i,displayOnMinLevel:h};F(r);const o=new t.GroundOverlay(e&&U(t,e),r);o.setImageURL(c),this.originInstance=o,W.call(this,o),n.addOverlay(o)}}},kt={name:"bm-label",render(){},mixins:[x("overlay")],props:{content:{type:String},title:{type:String},offset:{},position:{},labelStyle:{},zIndex:{type:Number,default:0},massClear:{type:Boolean,default:!0}},watch:{content(t){this.originInstance.setContent(t)},title(t){this.originInstance.setTitle(t)},"offset.width"(t,n){const{BMap:e}=this;t.toString()!==n.toString()&&this.originInstance.setOffset(A(e,{width:t,height:this.offset.height}))},"offset.height"(t,n){const{BMap:e}=this;t.toString()!==n.toString()&&this.originInstance.setOffset(A(e,{width:this.offset.width,height:t}))},"position.lng"(t,n){const{BMap:e}=this,s=t;t.toString()!==n.toString()&&s>=-180&&s<=180&&this.originInstance.setPosition(E(e,{lng:s,lat:this.position.lat}))},"position.lat"(t,n){const{BMap:e}=this,s=t;t.toString()!==n.toString()&&s>=-74&&s<=74&&this.originInstance.setPosition(E(e,{lng:this.position.lng,lat:s}))},labelStyle:{handler(t){this.originInstance.setStyle(t)},deep:!0},zIndex(t){this.originInstance.setZIndex(t)},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()}},methods:{load(){const{BMap:t,map:n,content:e,title:s,offset:c,position:h,labelStyle:i,zIndex:r,massClear:o,$parent:a}=this;let d={offset:A(t,c),position:E(t,h),enableMassClear:o};F(d);const p=new t.Label(e,d);this.originInstance=p;try{a.originInstance.setLabel(p)}catch{n.addOverlay(p)}s&&p.setTitle(s),i&&p.setStyle(i),r&&p.setZIndex(r),W.call(this,p)}}},le={name:"bm-info-window",mixins:[x("overlay")],props:{show:{type:Boolean},position:{type:Object},title:{type:String},width:{type:Number},height:{type:Number},maxWidth:{type:Number},offset:{type:Object},maximize:{type:Boolean},autoPan:{type:Boolean},closeOnClick:{type:Boolean,default:!0},message:{type:String}},watch:{show(t){t?this.openInfoWindow():this.closeInfoWindow()},"position.lng"(t,n){this.reload()},"position.lat"(t,n){this.reload()},"offset.width"(t,n){this.reload()},"offset.height"(t){this.reload()},maxWidth(){this.reload()},width(t){this.originInstance.setWidth(t)},height(t){this.originInstance.setHeight(t)},title(t){this.originInstance.setTitle(t)},maximize(t){t?this.originInstance.enableMaximize():this.originInstance.disableMaximize()},autoPan(t){t?this.originInstance.enableAutoPan():this.originInstance.disableAutoPan()},closeOnClick(t){t?this.originInstance.enableCloseOnClick():this.originInstance.disableCloseOnClick()}},methods:{redraw(){this.originInstance.redraw()},load(){const{BMap:t,map:n,show:e,title:s,width:c,height:h,maxWidth:i,offset:r,autoPan:o,closeOnClick:a,message:d,maximize:p,bindObserver:m,$parent:l}=this,f=this.$el;let y={width:c,height:h,title:s,maxWidth:i,offset:r&&A(t,r),enableAutoPan:o,enableCloseOnClick:a,enableMessage:typeof d=="undefined",message:d};F(y);const _=new t.InfoWindow(f,y);p?_.enableMaximize():_.disableMaximize(),W.call(this,_),this.originInstance=_,_.redraw(),[].forEach.call(f.querySelectorAll("img"),g=>{g.onload=()=>_.redraw()}),m(),this.$container=l.originInstance&&l.originInstance.openInfoWindow?l.originInstance:n,e&&this.openInfoWindow()},bindObserver(){const t=window.MutationObserver;if(!t)return;const{$el:n,originInstance:e}=this;this.observer=new t(s=>e.redraw()),this.observer.observe(n,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},openInfoWindow(){const{BMap:t,$container:n,position:e,originInstance:s}=this;n.openInfoWindow(s,E(t,e||this.$parent.position))},closeInfoWindow(){this.$container.closeInfoWindow(this.originInstance)}}};function ce(t,n,e,s,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.show]])}var Bt=D(le,[["render",ce]]);const he={name:"bm-overlay",emits:["initialize","draw"],mixins:[x("overlay")],props:{pane:{type:String}},watch:{pane(){this.reload()}},methods:{load(){},mountedLoad(){const{BMap:t,map:n,$el:e,pane:s}=this,c=this.$emit.bind(this);class h extends t.Overlay{initialize(){c("initialize",{BMap:t,map:n,el:e,overlay:this});try{n.getPanes()[s].appendChild(e)}catch{}return e}draw(){c("draw",{BMap:t,map:n,el:e,overlay:this})}}const i=new h;this.originInstance=i,n.addOverlay(i)}}};function de(t,n,e,s,c,h){return w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")])}var Mt=D(he,[["render",de]]);const pe={name:"bm-context-menu",props:{width:{type:Number}},mixins:[x("contextMenu")],methods:{load(){const{width:t,BMap:n,map:e,$parent:s}=this,c=this.parent=s.originInstance||e;this.originInstance&&c.removeContextMenu(this.originInstance);const h=this.originInstance=new n.ContextMenu;if(this.$slots.default)for(const i of this.$slots.default()||[]){const r=i.props;if(r.seperator){h.addSeparator();continue}const o=new n.MenuItem(r.text,function(a,d){r.callback&&r.callback({point:a,pixel:d,BMap:n,map:e,target:c})},{width:t,id:r.id,iconUrl:r.iconUrl});r.disabled?o.disable():o.enable(),r.originInstance=o,h.addItem(o)}c.addContextMenu(h)}}};function ue(t,n,e,s,c,h){return w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")])}var It=D(pe,[["render",ue]]);const me={name:"bm-context-menu-item",props:{callback:{type:Function,default:function(){}},text:{type:String},iconUrl:{type:String},id:{type:String},disabled:{type:Boolean},seperator:{type:Boolean},originInstance:{}},methods:{reload(){this.$parent.map&&this.$parent.load()}},watch:{text(){this.reload()},iconUrl(){this.reload()},id(){this.reload()},disabled(){this.reload()},iseperator(){this.reload()},callback(){this.reload()}},destroyed(){this.reload()},mounted(){this.reload()}};function ge(t,n,e,s,c,h){return w.openBlock(),w.createElementBlock("span",null,[w.renderSlot(t.$slots,"default")])}var St=D(me,[["render",ge]]);const fe={name:"bm-local-search",emits:["markersset","infohtmlset","resultshtmlset","searchcomplete"],mixins:[x("search")],props:{location:{type:[Object,String]},keyword:{type:[Array,String]},panel:{type:Boolean,default:!0},forceLocal:{type:Boolean},customData:{type:Object},bounds:{type:Object},nearby:{type:Object},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,search:e}=this;n.setLocation(t||this.map),e()},deep:!0},keyword(){this.search()},bounds:{handler(t){const{searchInBounds:n}=this;n(t)},deep:!0},nearby:{handler(t){const{searchNearby:n}=this;n(t)},deep:!0},forceLocal(){this.reload()},customData:{deep:!0,handler(){this.reload()}},pageCapacity(t){this.originInstance&&this.originInstance.setPageCapacity(t)},autoViewport(t){this.originInstance&&(t?this.originInstance.enableAutoViewport():this.originInstance.disableAutoViewport())},selectFirstResult(t){this.originInstance&&(t?this.originInstance.enableFirstResultSelection():this.originInstance.disableFirstResultSelection())},highlightMode(){this.reload()}},methods:{searchNearby(t){const{originInstance:n,keyword:e,customData:s,BMap:c}=this;n.searchNearby(e,E(c,t.center),t.radius,s)},searchInBounds(t){const{originInstance:n,keyword:e,customData:s,BMap:c}=this;n.searchInBounds(e,U(c,t),s)},search(){const{originInstance:t,keyword:n,forceLocal:e,customData:s,nearby:c,bounds:h,searchNearby:i,searchInBounds:r}=this;c?i(c):h?r(h):t.search(n,{forceLocal:e,customData:s})},load(){const t=this,{map:n,BMap:e,search:s,pageCapacity:c,autoViewport:h,selectFirstResult:i,highlightMode:r,location:o,originInstance:a}=this,d=o?R(o)?E(e,o):o:n,p=this.originInstance=new e.LocalSearch(d,{onMarkersSet(m){t.$emit("markersset",m)},onInfoHtmlSet(m){t.$emit("infohtmlset",m)},onResultsHtmlSet(m){t.$emit("resultshtmlset",m)},onSearchComplete(m){a&&a!==p&&a.clearResults(),t.$emit("searchcomplete",m)},pageCapacity:c,renderOptions:{map:n,panel:this.$el,selectFirstResult:i,autoViewport:h,highlightMode:r}});s()}}};function ye(t,n,e,s,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.panel]])}var xt=D(fe,[["render",ye]]);const ve={name:"bm-transit",emits:["searchcomplete","markersset","infohtmlset","polylinesset","resultshtmlset"],mixins:[x("search")],props:{location:{type:[Object,String]},start:{type:[Object,String]},end:{type:[Object,String]},panel:{type:Boolean,default:!0},policy:{type:String},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,map:e}=this;n.setLocation(t||e)},deep:!0},start:{handler(t){const{originInstance:n,end:e,BMap:s}=this;n.search(z(s,t),z(s,e))},deep:!0},end:{handler(t){const{originInstance:n,start:e,BMap:s}=this;n.search(z(s,e),z(s,t))},deep:!0},panel(){this.reload()},policy(t){this.originInstance.setPolicy(window[t])},pageCapacity(t){this.originInstance&&this.originInstance.setPageCapacity(t)},autoViewport(t){this.originInstance&&(t?this.originInstance.enableAutoViewport():this.originInstance.disableAutoViewport())},selectFirstResult(){this.reload()},highlightMode(){this.reload()}},methods:{search(t,n){const{originInstance:e}=this;e.search(t,n)},load(){const t=this,{map:n,BMap:e,location:s,policy:c,pageCapacity:h,selectFirstResult:i,autoViewport:r,highlightMode:o,search:a,start:d,end:p,originInstance:m}=this,l=s?R(s)?E(e,s):s:n,f=this.originInstance=new e.TransitRoute(l,{renderOptions:{map:n,panel:this.$el,selectFirstResult:i,autoViewport:r,highlightMode:o},policy:window[c],pageCapacity:h,onSearchComplete(y){m&&m!==f&&m.clearResults(),t.$emit("searchcomplete",y)},onMarkersSet(y){t.$emit("markersset",y)},onInfoHtmlSet(y){t.$emit("infohtmlset",y)},onPolylinesSet(y){t.$emit("polylinesset",y)},onResultsHtmlSet(y){t.$emit("resultshtmlset",y)}});a(R(d)?E(e,d):d,R(p)?E(e,p):p)}}};function _e(t,n,e,s,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.panel]])}var Ot=D(ve,[["render",_e]]);const be={name:"bm-walking",emits:["searchcomplete","markersset","infohtmlset","polylinesset","resultshtmlset"],mixins:[x("search")],props:{location:{type:[Object,String]},start:{type:[Object,String]},end:{type:[Object,String]},panel:{type:Boolean,default:!0},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,map:e}=this;n.setLocation(t||e)},deep:!0},start:{handler(t){const{originInstance:n,end:e,BMap:s}=this;n.search(z(s,t),z(s,e))},deep:!0},end:{handler(t){const{originInstance:n,start:e,BMap:s}=this;n.search(z(s,e),z(s,t))},deep:!0},panel(){this.reload()},autoViewport(t){this.reload()},selectFirstResult(t){this.reload()},highlightMode(){this.reload()}},methods:{search(t,n){const{originInstance:e}=this;e.search(t,n)},load(){const t=this,{map:n,BMap:e,location:s,selectFirstResult:c,autoViewport:h,highlightMode:i,search:r,start:o,end:a,originInstance:d}=this,p=s?R(s)?E(e,s):s:n,m=this.originInstance=new e.WalkingRoute(p,{renderOptions:{map:n,panel:this.$el,selectFirstResult:c,autoViewport:h,highlightMode:i},onSearchComplete(l){d&&d!==m&&d.clearResults(),t.$emit("searchcomplete",l)},onMarkersSet(l){t.$emit("markersset",l)},onInfoHtmlSet(l){t.$emit("infohtmlset",l)},onPolylinesSet(l){t.$emit("polylinesset",l)},onResultsHtmlSet(l){t.$emit("resultshtmlset",l)}});r(R(o)?E(e,o):o,R(a)?E(e,a):a)}}};function we(t,n,e,s,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.panel]])}var Et=D(be,[["render",we]]);const Ce={name:"bm-driving",emits:["searchcomplete","markersset","infohtmlset","polylinesset","resultshtmlset"],mixins:[x("search")],props:{location:{type:[Object,String]},start:{type:[Object,String]},end:{type:[Object,String]},startCity:{type:[String,Number]},endCity:{type:[String,Number]},waypoints:{type:Array},policy:{type:String},panel:{type:Boolean,default:!0},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,map:e}=this;n.setLocation(t||e)},deep:!0},start:{handler(t){const{originInstance:n,end:e,startCity:s,endCity:c,waypoints:h,BMap:i,getWaypoints:r}=this;n.search(z(i,t),z(i,e),{startCity:s,endCity:c,waypoints:r(h)})},deep:!0},end:{handler(t){const{originInstance:n,start:e,startCity:s,endCity:c,waypoints:h,BMap:i,getWaypoints:r}=this;n.search(z(i,e),z(i,t),{startCity:s,endCity:c,waypoints:r(h)})},deep:!0},startCity(t){const{originInstance:n,start:e,end:s,endCity:c,waypoints:h,getWaypoints:i}=this;n.search(e,s,{val:t,endCity:c,waypoints:i(h)})},endCity(t){const{originInstance:n,start:e,end:s,startCity:c,waypoints:h,getWaypoints:i}=this;n.search(e,s,{startCity:c,val:t,waypoints:i(h)})},waypoints:{handler(t){const{originInstance:n,start:e,end:s,startCity:c,endCity:h,getWaypoints:i}=this;n.search(e,s,{startCity:c,endCity:h,waypoints:i(t)})},deep:!0},panel(){this.reload()},policy(t){this.reload()},autoViewport(){this.reload()},selectFirstResult(){this.reload()},highlightMode(){this.reload()}},methods:{search(t,n,{startCity:e,endCity:s,waypoints:c}){const{originInstance:h,getWaypoints:i}=this;h.search(t,n,{startCity:e,endCity:s,waypoints:i(c)})},getWaypoints(t){const{BMap:n}=this;if(t)return t.map(e=>z(n,e))},load(){const t=this,{map:n,BMap:e,location:s,policy:c,selectFirstResult:h,autoViewport:i,highlightMode:r,search:o,start:a,end:d,startCity:p,endCity:m,waypoints:l,originInstance:f,getWaypoints:y}=this,_=s?R(s)?E(e,s):s:n,g=this.originInstance=new e.DrivingRoute(_,{renderOptions:{map:n,panel:this.$el,selectFirstResult:h,autoViewport:i,highlightMode:r},policy:window[c],onSearchComplete(B){f&&f!==g&&f.clearResults(),t.$emit("searchcomplete",B)},onMarkersSet(B){t.$emit("markersset",B)},onInfoHtmlSet(B){t.$emit("infohtmlset",B)},onPolylinesSet(B){t.$emit("polylinesset",B)},onResultsHtmlSet(B){t.$emit("resultshtmlset",B)}});o(z(e,a),z(e,d),{startCity:p,endCity:m,waypoints:y(l)})}}};function ke(t,n,e,s,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,[w.renderSlot(t.$slots,"default")],512)),[[w.vShow,e.panel]])}var $t=D(Ce,[["render",ke]]);const Be={name:"bm-bus",emits:["getbuslistcomplete","getbuslinecomplete","buslisthtmlset","buslinehtmlset","markersset","polylinesset"],mixins:[x("search")],props:{location:{type:[Object,String]},keyword:{type:String},panel:{type:Boolean,default:!0},pageCapacity:{type:Number},autoViewport:{type:Boolean},selectFirstResult:{type:Boolean}},watch:{location:{handler(t){const{originInstance:n,map:e}=this;n.setLocation(t||e)},deep:!0},keyword(t){this.search(t)},panel(){this.reload()},autoViewport(t){this.reload()},selectFirstResult(t){this.reload()}},methods:{search(t){const{originInstance:n}=this;n.getBusList(t)},load(){const t=this,{location:n,selectFirstResult:e,autoViewport:s,highlightMode:c,keyword:h,search:i,BMap:r,map:o,originInstance:a}=this,d=n?R(n)?E(r,n):n:o,p=this.originInstance=new r.BusLineSearch(d,{renderOptions:{map:o,panel:this.$el,selectFirstResult:e,autoViewport:s,highlightMode:c},onGetBusListComplete(m){a&&a!==p&&a.clearResults(),t.$emit("getbuslistcomplete",m)},onGetBusLineComplete(m){a&&a!==p&&a.clearResults(),t.$emit("getbuslinecomplete",m)},onBusListHtmlSet(m){t.$emit("buslisthtmlset",m)},onBusLineHtmlSet(m){t.$emit("buslinehtmlset",m)},onMarkersSet(m){t.$emit("markersset",m)},onPolylinesSet(m){t.$emit("polylinesset",m)}});i(h)}}};function Me(t,n,e,s,c,h){return w.withDirectives((w.openBlock(),w.createElementBlock("div",null,null,512)),[[w.vShow,e.panel]])}var Pt=D(Be,[["render",Me]]);const Tt={name:"bm-tile",render(t){},mixins:[x("layer")],props:{transparentPng:{type:Boolean},tileUrlTemplate:{type:String},copyright:{},zIndex:{type:Number}},watch:{transparentPng(){this.reload()},tileUrlTemplate(){this.reload()},copyright(){this.reload()},zIndex(){this.reload()}},methods:{load(){const{BMap:t,map:n,transparentPng:e,tileUrlTemplate:s,copyright:c,zIndex:h}=this;this.originInstance=new t.TileLayer({transparentPng:e,tileUrlTemplate:s,copyright:c&&{id:c.id,content:c.content,bounds:c.bounds&&U(c.bounds)},zIndex:h}),n.addTileLayer(this.originInstance)}}},At={name:"bm-triffic",render(t){},mixins:[x("layer")],props:{predictDate:{type:Object}},watch:{"pridictDate.weekday"(){this.reload()},"pridictDate.hour"(){this.reload()},pridictDate(){this.reload()}},methods:{load(){const{pridictDate:t,BMap:n,map:e}=this;this.originInstance=new n.TrafficLayer({pridictDate:t}),e.addTileLayer(this.originInstance)}}},Ie={mixins:[x("abstract")],emits:["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","load"],props:["name","strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","massClear","clicking"],data(){return{paths:[]}},components:{BmPolygon:nt},watch:{name(){this.reload()}},methods:{load(){const{BMap:t,name:n}=this;new t.Boundary().get(n,s=>{const c=s.boundaries.map(h=>(h||[]).split(";").map(i=>(([r,o])=>({lng:r,lat:o}))(i.split(",").map(r=>+r))));this.paths=c,this.$emit("load",{boundaries:s.boundaries,paths:[...c]})})}}},Se={key:0};function xe(t,n,e,s,c,h){const i=w.resolveComponent("bm-polygon");return c.paths.length?(w.openBlock(),w.createElementBlock("div",Se,[(w.openBlock(!0),w.createElementBlock(w.Fragment,null,w.renderList(c.paths,(r,o)=>(w.openBlock(),w.createBlock(i,{key:o,path:r,"stroke-color":e.strokeColor,"stroke-weight":e.strokeWeight,"stroke-opacity":e.strokeOpacity,"stroke-style":e.strokeStyle,"fill-opacity":e.fillOpacity,"fill-color":e.fillColor,"mass-clear":e.massClear,clicking:e.clicking,onClick:n[0]||(n[0]=a=>t.$emit("click",a)),onDblclick:n[1]||(n[1]=a=>t.$emit("dblclick",a)),onMousedown:n[2]||(n[2]=a=>t.$emit("mousedown",a)),onMouseup:n[3]||(n[3]=a=>t.$emit("mouseup",a)),onMouseout:n[4]||(n[4]=a=>t.$emit("mouseout",a)),onMouseover:n[5]||(n[5]=a=>t.$emit("mouseover",a)),onRemove:n[6]||(n[6]=a=>t.$emit("remove",a))},null,8,["path","stroke-color","stroke-weight","stroke-opacity","stroke-style","fill-opacity","fill-color","mass-clear","clicking"]))),128))])):w.createCommentVNode("",!0)}var Lt=D(Ie,[["render",xe]]);const Oe={name:"bm-autocomplete",mixins:[x("autoComplete")],emits:["update:modelValue","searchcomplete"],props:{types:{type:String},location:{type:String},sugStyle:{type:Object,default(){return{}}},modelValue:{}},watch:{types(){this.reload()},location(){this.reload()}},methods:{load(){const{BMap:t,map:n,$el:e,types:s,location:c,sugStyle:h}=this,i=e.querySelector("input");!i||(this.originInstance=new t.Autocomplete({input:i,types:s,location:c||n,onSearchComplete:r=>{const o=document.querySelectorAll(".tangram-suggestion-main");for(const a of o)for(const d in h)a.style[d]=h[d].toString();this.$emit("searchcomplete",r)}}),this.originInstance.addEventListener("onconfirm",r=>{const o=r.item.value;this.$emit("update:modelValue",o.province+o.city+o.district+o.street+o.business)}),W.call(this,this.originInstance))}}},Ee=w.createElementVNode("input",null,null,-1);function $e(t,n,e,s,c,h){return w.openBlock(),w.createElementBlock("span",null,[w.renderSlot(t.$slots,"default",{},()=>[Ee])])}var zt=D(Oe,[["render",$e]]),Ft={exports:{}};(function(t,n){(function(e,s){t.exports=s()})(j,function(){var e=typeof window!="undefined"?window:typeof j!="undefined"?j:this;function s(l,f){return f={exports:{}},l(f,f.exports,e),f.exports}var c=s(function(l,f,y){(function(_,g){typeof f=="object"?l.exports=g():(_.BMapLib=_.BMapLib||{},_.BMapLib.TextIconOverlay=_.BMapLib.TextIconOverlay||g())})(e,function(){var _,g=_=g||{version:"1.3.8"},B={};g.guid="$BAIDU$",B[g.guid]=B[g.guid]||{},g.dom=g.dom||{},g.dom.g=function(u){return typeof u=="string"||u instanceof String?document.getElementById(u):u&&u.nodeName&&(u.nodeType==1||u.nodeType==9)?u:null},g.g=g.G=g.dom.g,g.dom.getDocument=function(u){return u=g.dom.g(u),u.nodeType==9?u:u.ownerDocument||u.document},g.lang=g.lang||{},g.lang.isString=function(u){return Object.prototype.toString.call(u)=="[object String]"},g.isString=g.lang.isString,g.dom._g=function(u){return g.lang.isString(u)?document.getElementById(u):u},g._g=g.dom._g,g.browser=g.browser||{},/msie (\d+\.\d)/i.test(navigator.userAgent)&&(g.browser.ie=g.ie=document.documentMode||+RegExp.$1),g.dom.getComputedStyle=function(u,v){u=g.dom._g(u);var b=g.dom.getDocument(u),C;return b.defaultView&&b.defaultView.getComputedStyle&&(C=b.defaultView.getComputedStyle(u,null),C)?C[v]||C.getPropertyValue(v):""},g.dom._styleFixer=g.dom._styleFixer||{},g.dom._styleFilter=g.dom._styleFilter||[],g.dom._styleFilter.filter=function(u,v,b){for(var C=0,k=g.dom._styleFilter,T;T=k[C];C++)(T=T[b])&&(v=T(u,v));return v},g.string=g.string||{},g.string.toCamelCase=function(u){return u.indexOf("-")<0&&u.indexOf("_")<0?u:u.replace(/[-_][^-_]/g,function(v){return v.charAt(1).toUpperCase()})},g.dom.getStyle=function(u,v){var b=g.dom;u=b.g(u),v=g.string.toCamelCase(v);var C=u.style[v]||(u.currentStyle?u.currentStyle[v]:"")||b.getComputedStyle(u,v);if(!C){var k=b._styleFixer[v];k&&(C=k.get?k.get(u):g.dom.getStyle(u,k))}return(k=b._styleFilter)&&(C=k.filter(v,C,"get")),C},g.getStyle=g.dom.getStyle,/opera\/(\d+\.\d)/i.test(navigator.userAgent)&&(g.browser.opera=+RegExp.$1),g.browser.isWebkit=/webkit/i.test(navigator.userAgent),g.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),g.browser.isStrict=document.compatMode=="CSS1Compat",g.dom.getPosition=function(u){u=g.dom.g(u);var v=g.dom.getDocument(u),b=g.browser,C=g.dom.getStyle;b.isGecko>0&&v.getBoxObjectFor&&C(u,"position")=="absolute"&&(u.style.top===""||u.style.left);var k={left:0,top:0},T=b.ie&&!b.isStrict?v.body:v.documentElement,S,$;if(u==T)return k;if(u.getBoundingClientRect){$=u.getBoundingClientRect(),k.left=Math.floor($.left)+Math.max(v.documentElement.scrollLeft,v.body.scrollLeft),k.top=Math.floor($.top)+Math.max(v.documentElement.scrollTop,v.body.scrollTop),k.left-=v.documentElement.clientLeft,k.top-=v.documentElement.clientTop;var L=v.body,V=parseInt(C(L,"borderLeftWidth")),Rt=parseInt(C(L,"borderTopWidth"));b.ie&&!b.isStrict&&(k.left-=isNaN(V)?2:V,k.top-=isNaN(Rt)?2:Rt)}else{S=u;do{if(k.left+=S.offsetLeft,k.top+=S.offsetTop,b.isWebkit>0&&C(S,"position")=="fixed"){k.left+=v.body.scrollLeft,k.top+=v.body.scrollTop;break}S=S.offsetParent}while(S&&S!=u);for((b.opera>0||b.isWebkit>0&&C(u,"position")=="absolute")&&(k.top-=v.body.offsetTop),S=u.offsetParent;S&&S!=v.body;)k.left-=S.scrollLeft,(!b.opera||S.tagName!="TR")&&(k.top-=S.scrollTop),S=S.offsetParent}return k},g.event=g.event||{},g.event._listeners=g.event._listeners||[],g.event.on=function(u,v,b){v=v.replace(/^on/i,""),u=g.dom._g(u);var C=function(L){b.call(u,L)},k=g.event._listeners,T=g.event._eventFilter,S,$=v;return v=v.toLowerCase(),T&&T[v]&&(S=T[v](u,v,C),$=S.type,C=S.listener),u.addEventListener?u.addEventListener($,C,!1):u.attachEvent&&u.attachEvent("on"+$,C),k[k.length]=[u,v,b,C,$],u},g.on=g.event.on,function(){var u=B[g.guid];g.lang.guid=function(){return"TANGRAM__"+(u._counter++).toString(36)},u._counter=u._counter||1}(),B[g.guid]._instances=B[g.guid]._instances||{},g.lang.isFunction=function(u){return Object.prototype.toString.call(u)=="[object Function]"},g.lang.Class=function(u){this.guid=u||g.lang.guid(),B[g.guid]._instances[this.guid]=this},B[g.guid]._instances=B[g.guid]._instances||{},g.lang.Class.prototype.dispose=function(){delete B[g.guid]._instances[this.guid];for(var u in this)g.lang.isFunction(this[u])||delete this[u];this.disposed=!0},g.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},g.lang.Event=function(u,v){this.type=u,this.returnValue=!0,this.target=v||null,this.currentTarget=null},g.lang.Class.prototype.addEventListener=function(u,v,b){if(!!g.lang.isFunction(v)){!this.__listeners&&(this.__listeners={});var C=this.__listeners,k;if(typeof b=="string"&&b){if(/[^\w\-]/.test(b))throw"nonstandard key:"+b;v.hashCode=b,k=b}u.indexOf("on")!=0&&(u="on"+u),typeof C[u]!="object"&&(C[u]={}),k=k||g.lang.guid(),v.hashCode=k,C[u][k]=v}},g.lang.Class.prototype.removeEventListener=function(u,v){if(!(typeof v!="undefined"&&(g.lang.isFunction(v)&&!(v=v.hashCode)||!g.lang.isString(v)))){!this.__listeners&&(this.__listeners={}),u.indexOf("on")!=0&&(u="on"+u);var b=this.__listeners;if(!!b[u])if(typeof v!="undefined")b[u][v]&&delete b[u][v];else for(var C in b[u])delete b[u][C]}},g.lang.Class.prototype.dispatchEvent=function(u,v){g.lang.isString(u)&&(u=new g.lang.Event(u)),!this.__listeners&&(this.__listeners={}),v=v||{};for(var b in v)u[b]=v[b];var b,C=this.__listeners,k=u.type;if(u.target=u.target||this,u.currentTarget=this,k.indexOf("on")!=0&&(k="on"+k),g.lang.isFunction(this[k])&&this[k].apply(this,arguments),typeof C[k]=="object")for(b in C[k])C[k][b].apply(this,arguments);return u.returnValue},g.lang.inherits=function(u,v,b){var C,k,T=u.prototype,S=new Function;S.prototype=v.prototype,k=u.prototype=new S;for(C in T)k[C]=T[C];u.prototype.constructor=u,u.superClass=v.prototype,typeof b=="string"&&(k._className=b)},g.inherits=g.lang.inherits;var O="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/images/m",P="png",I=function(u,v,b){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}_.lang.inherits(I,BMap.Overlay,"TextIconOverlay"),this._position=u,this._text=v,this._options=b||{},this._styles=this._options.styles||[],!this._styles.length&&this._setupDefaultStyles()};return I.prototype._setupDefaultStyles=function(){for(var u=[53,56,66,78,90],v=0,b;b=u[v];v++)this._styles.push({url:O+v+"."+P,size:new BMap.Size(b,b)})},I.prototype.initialize=function(u){return this._map=u,this._domElement=document.createElement("div"),this._updateCss(),this._updateText(),this._updatePosition(),this._bind(),this._map.getPanes().markerMouseTarget.appendChild(this._domElement),this._domElement},I.prototype.draw=function(){this._map&&this._updatePosition()},I.prototype.getText=function(){return this._text},I.prototype.setText=function(u){u&&(!this._text||this._text.toString()!=u.toString())&&(this._text=u,this._updateText(),this._updateCss(),this._updatePosition())},I.prototype.getPosition=function(){return this._position},I.prototype.setPosition=function(u){u&&(!this._position||!this._position.equals(u))&&(this._position=u,this._updatePosition())},I.prototype.getStyleByText=function(u,v){var b=parseInt(u),C=parseInt(b/10);return C=Math.max(0,C),C=Math.min(C,v.length-1),v[C]},I.prototype._updateCss=function(){if(!!this._domElement){var u=this.getStyleByText(this._text,this._styles);this._domElement.style.cssText=this._buildCssText(u)}},I.prototype._updateText=function(){this._domElement&&(this._domElement.innerHTML=this._text)},I.prototype._updatePosition=function(){if(this._domElement&&this._position){var u=this._domElement.style,v=this._map.pointToOverlayPixel(this._position);v.x-=Math.ceil(parseInt(u.width)/2),v.y-=Math.ceil(parseInt(u.height)/2),u.left=v.x+"px",u.top=v.y+"px"}},I.prototype._buildCssText=function(u){var v=u.url,b=u.size,C=u.anchor,k=u.offset,T=u.textColor||"black",S=u.textSize||10,$=[];if(_.browser.ie<7)$.push('filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+v+'");');else{$.push("background-image:url("+v+");");var L="0 0";k instanceof BMap.Size&&(L=k.width+"px "+k.height+"px"),$.push("background-position:"+L+";")}return b instanceof BMap.Size&&(C instanceof BMap.Size?(C.height>0&&C.height<b.height&&$.push("height:"+(b.height-C.height)+"px; padding-top:"+C.height+"px;"),C.width>0&&C.width<b.width&&$.push("width:"+(b.width-C.width)+"px; padding-left:"+C.width+"px;")):($.push("height:"+b.height+"px; line-height:"+b.height+"px;"),$.push("width:"+b.width+"px; text-align:center;"))),$.push("cursor:pointer; color:"+T+"; position:absolute; font-size:"+S+"px; font-family:Arial,sans-serif; font-weight:bold"),$.join("")},I.prototype._bind=function(){if(!this._domElement)return;var u=this,v=this._map,b=_.lang.Event;function C(k,T){var S=k.srcElement||k.target,$=k.clientX||k.pageX,L=k.clientY||k.pageY;if(k&&T&&$&&L&&S){var V=_.dom.getPosition(v.getContainer());T.pixel=new BMap.Pixel($-V.left,L-V.top),T.point=v.pixelToPoint(T.pixel)}return T}_.event.on(this._domElement,"mouseover",function(k){u.dispatchEvent(C(k,new b("onmouseover")))}),_.event.on(this._domElement,"mouseout",function(k){u.dispatchEvent(C(k,new b("onmouseout")))}),_.event.on(this._domElement,"click",function(k){u.dispatchEvent(C(k,new b("onclick")))})},I})}),h=c&&typeof c=="object"&&"default"in c?c.default:c,i=function(l,f,y){f=r(f);var _=l.pointToPixel(f.getNorthEast()),g=l.pointToPixel(f.getSouthWest());_.x+=y,_.y-=y,g.x-=y,g.y+=y;var B=l.pixelToPoint(_),O=l.pixelToPoint(g);return new BMap.Bounds(O,B)},r=function(l){var f=o(l.getNorthEast().lng,-180,180),y=o(l.getSouthWest().lng,-180,180),_=o(l.getNorthEast().lat,-74,74),g=o(l.getSouthWest().lat,-74,74);return new BMap.Bounds(new BMap.Point(y,g),new BMap.Point(f,_))},o=function(l,f,y){return f&&(l=Math.max(l,f)),y&&(l=Math.min(l,y)),l},a=function(l){return Object.prototype.toString.call(l)==="[object Array]"},d=function(l,f){var y=-1;if(a(f)){if(f.indexOf)y=f.indexOf(l);else for(var _=0,g;g=f[_];_++)if(g===l){y=_;break}}return y},p=function(l,f){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}if(!!l){this._map=l,this._markers=[],this._clusters=[];var y=f||{};this._gridSize=y.gridSize||60,this._maxZoom=y.maxZoom||18,this._minClusterSize=y.minClusterSize||2,this._isAverageCenter=!1,y.isAverageCenter!=null&&(this._isAverageCenter=y.isAverageCenter),this._styles=y.styles||[];var _=this;this._map.addEventListener("zoomend",function(){_._redraw()}),this._map.addEventListener("moveend",function(){_._redraw()});var g=y.markers;a(g)&&this.addMarkers(g)}};p.prototype.addMarkers=function(l){if(!!l.length){for(var f=0,y=l.length;f<y;f++)this._pushMarkerTo(l[f]);this._createClusters()}},p.prototype._pushMarkerTo=function(l){var f=d(l,this._markers);f===-1&&(l.isInCluster=!1,this._markers.push(l))},p.prototype.addMarker=function(l){this._pushMarkerTo(l),this._createClusters()},p.prototype._createClusters=function(){var l=this._map.getBounds();if(!!l.getCenter())for(var f=i(this._map,l,this._gridSize),y=0,_;_=this._markers[y];y++)!_.isInCluster&&f.containsPoint(_.getPosition())&&this._addToClosestCluster(_)},p.prototype._addToClosestCluster=function(l){var f=4e6,y=null;l.getPosition();for(var _=0,g;g=this._clusters[_];_++){var B=g.getCenter();if(B){var O=this._map.getDistance(B,l.getPosition());O<f&&(f=O,y=g)}}if(y&&y.isMarkerInClusterBounds(l))y.addMarker(l);else{var g=new m(this);g.addMarker(l),this._clusters.push(g)}},p.prototype._clearLastClusters=function(){for(var l=0,f;f=this._clusters[l];l++)f.remove();this._clusters=[],this._removeMarkersFromCluster()},p.prototype._removeMarkersFromCluster=function(){for(var l=0,f;f=this._markers[l];l++)f.isInCluster=!1},p.prototype._removeMarkersFromMap=function(){for(var l=0,f;f=this._markers[l];l++){f.isInCluster=!1;var y=f.getLabel();this._map.removeOverlay(f),f.setLabel(y)}},p.prototype._removeMarker=function(l){var f=d(l,this._markers);return f===-1?!1:(this._map.removeOverlay(l),this._markers.splice(f,1),!0)},p.prototype.removeMarker=function(l){var f=this._removeMarker(l);return f&&(this._clearLastClusters(),this._createClusters()),f},p.prototype.removeMarkers=function(l){for(var f=!1,y=0;y<l.length;y++){var _=this._removeMarker(l[y]);f=f||_}return f&&(this._clearLastClusters(),this._createClusters()),f},p.prototype.clearMarkers=function(){this._clearLastClusters(),this._removeMarkersFromMap(),this._markers=[]},p.prototype._redraw=function(){this._clearLastClusters(),this._createClusters()},p.prototype.getGridSize=function(){return this._gridSize},p.prototype.setGridSize=function(l){this._gridSize=l,this._redraw()},p.prototype.getMaxZoom=function(){return this._maxZoom},p.prototype.setMaxZoom=function(l){this._maxZoom=l,this._redraw()},p.prototype.getStyles=function(){return this._styles},p.prototype.setStyles=function(l){this._styles=l,this._redraw()},p.prototype.getMinClusterSize=function(){return this._minClusterSize},p.prototype.setMinClusterSize=function(l){this._minClusterSize=l,this._redraw()},p.prototype.isAverageCenter=function(){return this._isAverageCenter},p.prototype.getMap=function(){return this._map},p.prototype.getMarkers=function(){return this._markers},p.prototype.getClustersCount=function(){for(var l=0,f=0,y;y=this._clusters[f];f++)y.isReal()&&l++;return l};function m(l){this._markerClusterer=l,this._map=l.getMap(),this._minClusterSize=l.getMinClusterSize(),this._isAverageCenter=l.isAverageCenter(),this._center=null,this._markers=[],this._gridBounds=null,this._isReal=!1,this._clusterMarker=new h(this._center,this._markers.length,{styles:this._markerClusterer.getStyles()})}return m.prototype.addMarker=function(l){if(this.isMarkerInCluster(l))return!1;if(!this._center)this._center=l.getPosition(),this.updateGridBounds();else if(this._isAverageCenter){var f=this._markers.length+1,y=(this._center.lat*(f-1)+l.getPosition().lat)/f,_=(this._center.lng*(f-1)+l.getPosition().lng)/f;this._center=new BMap.Point(_,y),this.updateGridBounds()}l.isInCluster=!0,this._markers.push(l);var g=this._markers.length;if(g<this._minClusterSize)return this._map.addOverlay(l),!0;if(g===this._minClusterSize)for(var B=0;B<g;B++){var O=this._markers[B].getLabel();this._markers[B].getMap()&&this._map.removeOverlay(this._markers[B]),this._markers[B].setLabel(O)}return this._map.addOverlay(this._clusterMarker),this._isReal=!0,this.updateClusterMarker(),!0},m.prototype.isMarkerInCluster=function(l){if(this._markers.indexOf)return this._markers.indexOf(l)!=-1;for(var f=0,y;y=this._markers[f];f++)if(y===l)return!0;return!1},m.prototype.isMarkerInClusterBounds=function(l){return this._gridBounds.containsPoint(l.getPosition())},m.prototype.isReal=function(l){return this._isReal},m.prototype.updateGridBounds=function(){var l=new BMap.Bounds(this._center,this._center);this._gridBounds=i(this._map,l,this._markerClusterer.getGridSize())},m.prototype.updateClusterMarker=function(){if(this._map.getZoom()>this._markerClusterer.getMaxZoom()){this._clusterMarker&&this._map.removeOverlay(this._clusterMarker);for(var l=0,f;f=this._markers[l];l++)this._map.addOverlay(f);return}if(this._markers.length<this._minClusterSize){this._clusterMarker.hide();return}this._clusterMarker.setPosition(this._center),this._clusterMarker.setText(this._markers.length),this._clusterMarker.addEventListener&&!this._clusterMarker._hasClickEvent&&this._clusterMarker.addEventListener("click",function(y){this._clusterMarker._hasClickEvent=!0,this._markers&&this._map.setViewport(this.getBounds())}.bind(this))},m.prototype.remove=function(){for(var l=0;this._markers[l];l++){var f=this._markers[l].getLabel();this._markers[l].getMap()&&this._map.removeOverlay(this._markers[l]),this._markers[l].setLabel(f)}this._map.removeOverlay(this._clusterMarker),this._markers.length=0,delete this._markers},m.prototype.getBounds=function(){for(var l=new BMap.Bounds(this._center,this._center),f=0,y;y=this._markers[f];f++)l.extend(y.getPosition());return l},m.prototype.getCenter=function(){return this._center},p})})(Ft);var Pe=Ft.exports;const J=[],Te={name:"bml-marker-clusterer",mixins:[x("markerClusterer")],provide(){return{Cluster:this}},props:{gridSize:{type:Number},maxZoom:{type:Number},minClusterSize:{type:Number},styles:{type:Array,default(){return[]}},averageCenter:{type:Boolean,default:!1}},data(){return{}},watch:{gridSize:{handler(t){const{BMap:n,originInstance:e}=this;e.setGridSize(t)},deep:!0},maxZoom(t){const{originInstance:n}=this;n.setMaxZoom(t)},minClusterSize:{handler(t){const{BMap:n,originInstance:e}=this;e.setMinClusterSize(t)},deep:!0},styles:{handler(t){const{BMap:n,originInstance:e}=this,s=JSON.parse(JSON.stringify(t)).map(c=>(c.size=c.size&&A(n,c.size),c));e.setStyles(s)},deep:!0},averageCenter(t){this.reload()}},methods:{load(){const{BMap:t,map:n,gridSize:e,minClusterSize:s,maxZoom:c,styles:h,averageCenter:i}=this;this.originInstance=new Pe(n,{gridSize:e||60,maxZoom:c,minClusterSize:s||2,styles:h.map(r=>(r.size=A(t,r.size),r)),isAverageCenter:i}),this.$nextTick(()=>{const r=J.map(o=>o.originInstance).filter(o=>o instanceof t.Marker);this.originInstance.addMarkers(r)})},addMaker(t){J.push(t)},removeMaker(t){J.splice(J.indexOf(t),1)}},beforeCreate(){this.preventChildrenRender=!0}};function Ae(t,n,e,s,c,h){return w.openBlock(),w.createElementBlock("span",null,[w.renderSlot(t.$slots,"default")])}var Le=D(Te,[["render",Ae]]),Dt={exports:{}};(function(t,n){(function(e,s){t.exports=s()})(j,function(){var e={};e.dom={},e.dom.g=function(i){return typeof i=="string"||i instanceof String?document.getElementById(i):i&&i.nodeName&&(i.nodeType==1||i.nodeType==9)?i:null},e.g=e.G=e.dom.g,e.lang=e.lang||{},e.lang.isString=function(i){return Object.prototype.toString.call(i)=="[object String]"},e.isString=e.lang.isString,e.dom._g=function(i){return e.lang.isString(i)?document.getElementById(i):i},e._g=e.dom._g,e.dom.getDocument=function(i){return i=e.dom.g(i),i.nodeType==9?i:i.ownerDocument||i.document},e.browser=e.browser||{},e.browser.ie=e.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,e.dom.getComputedStyle=function(i,r){i=e.dom._g(i);var o=e.dom.getDocument(i),a;return o.defaultView&&o.defaultView.getComputedStyle&&(a=o.defaultView.getComputedStyle(i,null),a)?a[r]||a.getPropertyValue(r):""},e.dom._styleFixer=e.dom._styleFixer||{},e.dom._styleFilter=e.dom._styleFilter||[],e.dom._styleFilter.filter=function(i,r,o){for(var a=0,d=e.dom._styleFilter,p;p=d[a];a++)(p=p[o])&&(r=p(i,r));return r},e.string=e.string||{},e.string.toCamelCase=function(i){return i.indexOf("-")<0&&i.indexOf("_")<0?i:i.replace(/[-_][^-_]/g,function(r){return r.charAt(1).toUpperCase()})},e.dom.getStyle=function(i,r){var o=e.dom;i=o.g(i),r=e.string.toCamelCase(r);var a=i.style[r]||(i.currentStyle?i.currentStyle[r]:"")||o.getComputedStyle(i,r);if(!a){var d=o._styleFixer[r];d&&(a=d.get?d.get(i):e.dom.getStyle(i,d))}return(d=o._styleFilter)&&(a=d.filter(r,a,"get")),a},e.getStyle=e.dom.getStyle,e.dom._NAME_ATTRS=function(){var i={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};return e.browser.ie<8?(i.for="htmlFor",i.class="className"):(i.htmlFor="for",i.className="class"),i}(),e.dom.setAttr=function(i,r,o){return i=e.dom.g(i),r=="style"?i.style.cssText=o:(r=e.dom._NAME_ATTRS[r]||r,i.setAttribute(r,o)),i},e.setAttr=e.dom.setAttr,e.dom.setAttrs=function(i,r){i=e.dom.g(i);for(var o in r)e.dom.setAttr(i,o,r[o]);return i},e.setAttrs=e.dom.setAttrs,e.dom.create=function(i,r){var o=document.createElement(i),a=r||{};return e.dom.setAttrs(o,a)},e.object=e.object||{},e.extend=e.object.extend=function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i};var s=function(i,r,o){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}!r||r.length<1||(this._map=i,this._path=r,this.i=0,this._setTimeoutQuene=[],this._projection=this._map.getMapType().getProjection(),this._opts={icon:null,speed:4e3,defaultContent:"",showInfoWindow:!1},this._setOptions(o),this._rotation=0,!this._opts.icon instanceof BMap.Icon&&(this._opts.icon=defaultIcon))};s.prototype._setOptions=function(i){if(!!i)for(var r in i)i.hasOwnProperty(r)&&(this._opts[r]=i[r])},s.prototype.start=function(){var i=this,r=i._path.length;if(this._opts.onstart&&this._opts.onstart(i),i.i&&i.i<r-1)if(i._fromPause)i._fromStop||i._moveNext(++i.i);else return;else!i._marker&&i._addMarker(),i._timeoutFlag=setTimeout(function(){!i._overlay&&i._addInfoWin(),i._moveNext(i.i)},400);this._fromPause=!1,this._fromStop=!1},s.prototype.stop=function(){this.i=0,this._fromStop=!0,clearInterval(this._intervalFlag),this._clearTimeout();for(var i=0,r=this._opts.landmarkPois,o=r.length;i<o;i++)r[i].bShow=!1;this._opts.onstop&&this._opts.onstop(this)},s.prototype.pause=function(){clearInterval(this._intervalFlag),this._fromPause=!0,this._clearTimeout(),this._opts.onpause&&this._opts.onpause(this)},s.prototype.hideInfoWindow=function(){this._opts.showInfoWindow=!1,this._overlay&&(this._overlay._div.style.visibility="hidden")},s.prototype.showInfoWindow=function(){this._opts.showInfoWindow=!0,this._overlay&&(this._overlay._div.style.visibility="visible")},s.prototype.dispose=function(){clearInterval(this._intervalFlag),this._setTimeoutQuene&&this._clearTimeout(),this._map&&(this._map.removeOverlay(this._overlay),this._map.removeOverlay(this._marker))},e.object.extend(s.prototype,{_addMarker:function(i){this._marker&&(this.stop(),this._map.removeOverlay(this._marker),clearTimeout(this._timeoutFlag)),this._overlay&&this._map.removeOverlay(this._overlay);var r=new BMap.Marker(this._path[0]);this._opts.icon&&r.setIcon(this._opts.icon),this._map.addOverlay(r),r.setAnimation(BMAP_ANIMATION_DROP),this._marker=r},_addInfoWin:function(){var i=this;!c.prototype.initialize&&h();var r=new c(i._marker.getPosition(),i._opts.defaultContent);r.setRelatedClass(this),this._overlay=r,this._map.addOverlay(r),this._opts.showInfoWindow?this.showInfoWindow():this.hideInfoWindow()},_getMercator:function(i){return this._map.getMapType().getProjection().lngLatToPoint(i)},_getDistance:function(i,r){return Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2))},_move:function(i,r,o){var a=this,d=0,p=10,m=this._opts.speed/(1e3/p),l=this._projection.lngLatToPoint(i),f=this._projection.lngLatToPoint(r),y=Math.round(a._getDistance(l,f)/m);if(y<1){a._moveNext(++a.i);return}a._intervalFlag=setInterval(function(){if(d>=y){if(clearInterval(a._intervalFlag),a.i>a._path.length)return;a._moveNext(++a.i),a._opts.onmove(a)}else{d++;var _=o(l.x,f.x,d,y),g=o(l.y,f.y,d,y),B=a._projection.pointToLngLat(new BMap.Pixel(_,g));if(d==1){var O=null;a.i-1>=0&&(O=a._path[a.i-1]),a._opts.enableRotation==!0&&a.setRotation(O,i,r),a._opts.autoView&&(a._map.getBounds().containsPoint(B)||a._map.setCenter(B))}a._marker.setPosition(B),a._setInfoWin(B)}},p)},setRotation:function(i,r,o){var a=this,d=0;if(r=a._map.pointToPixel(r),o=a._map.pointToPixel(o),o.x!=r.x){var p=(o.y-r.y)/(o.x-r.x),m=Math.atan(p);d=m*360/(2*Math.PI),o.x<r.x?d=-d+90+90:d=-d,a._marker.setRotation(-d)}else{var l=o.y-r.y,f=0;l>0?f=-1:f=1,a._marker.setRotation(-f*90)}},linePixellength:function(i,r){return Math.sqrt(Math.abs(i.x-r.x)*Math.abs(i.x-r.x)+Math.abs(i.y-r.y)*Math.abs(i.y-r.y))},pointToPoint:function(i,r){return Math.abs(i.x-r.x)*Math.abs(i.x-r.x)+Math.abs(i.y-r.y)*Math.abs(i.y-r.y)},_moveNext:function(i){var r=this;i<this._path.length-1?r._move(r._path[i],r._path[i+1],r._tween.linear):r.stop()},moveNext:function(i){var r=this;i<this._path.length-1?r._move(r._path[i],r._path[i+1],r._tween.linear):r.stop()},_setInfoWin:function(i){var r=this;r._overlay.setPosition(i,r._marker.getIcon().size);var o=r._troughPointIndex(i);o!=-1?(clearInterval(r._intervalFlag),r._overlay.setHtml(r._opts.landmarkPois[o].html),r._overlay.setPosition(i,r._marker.getIcon().size),r._pauseForView(o)):r._overlay.setHtml(r._opts.defaultContent)},_pauseForView:function(i){var r=this,o=setTimeout(function(){r._moveNext(++r.i)},r._opts.landmarkPois[i].pauseTime*1e3);r._setTimeoutQuene.push(o)},_clearTimeout:function(){for(var i in this._setTimeoutQuene)clearTimeout(this._setTimeoutQuene[i]);this._setTimeoutQuene.length=0},_tween:{linear:function(i,r,o,a){var d=i,p=r-i,m=o,l=a;return p*m/l+d}},_troughPointIndex:function(i){for(var r=this._opts.landmarkPois,o,a=0,d=r.length;a<d;a++)if(!r[a].bShow&&(o=this._map.getDistance(new BMap.Point(r[a].lng,r[a].lat),i),o<10))return r[a].bShow=!0,a;return-1}});function c(i,r){this._point=i,this._html=r}function h(){c.prototype=new BMap.Overlay,c.prototype.initialize=function(i){var r=this._div=e.dom.create("div",{style:"border:solid 1px #ccc;width:auto;min-width:50px;text-align:center;position:absolute;background:#fff;color:#000;font-size:12px;border-radius: 10px;padding:5px;white-space: nowrap;"});return r.innerHTML=this._html,i.getPanes().floatPane.appendChild(r),this._map=i,r},c.prototype.draw=function(){this.setPosition(this.lushuMain._marker.getPosition(),this.lushuMain._marker.getIcon().size)},e.object.extend(c.prototype,{setPosition:function(i,r){var o=this._map.pointToOverlayPixel(i),a=e.dom.getStyle(this._div,"width"),d=e.dom.getStyle(this._div,"height"),p=parseInt(this._div.clientWidth||a,10);parseInt(this._div.clientHeight||d,10),this._div.style.left=o.x-p/2+"px",this._div.style.bottom=-(o.y-r.height)+"px"},setHtml:function(i){this._div.innerHTML=i},setRelatedClass:function(i){this.lushuMain=i}})}return s})})(Dt);var ze=Dt.exports;const Fe={name:"bm-lushu",render(t){},emits:["start","stop","pause","move"],mixins:[x("lushu")],props:{path:{type:Array,default:[]},landmarkPois:{type:Array,default(){return[]}},icon:{type:Object},speed:{type:Number,default:4e3},content:{type:String,default:""},autoView:{type:Boolean,default:!1},rotation:{type:Boolean,default:!1},infoWindow:{type:Boolean,default:!0},play:{type:Boolean,default:!0}},watch:{path:{handler(t){this.reload()},deep:!0},landmarkPois:{handler(t){this.reload()},deep:!0},icon:{handler(t){const{originInstance:n,content:e}=this,s=H(BMap,t);n._opts.icon=s,n._marker=s},deep:!0},speed(t){const{originInstance:n,content:e}=this;n._opts.speed=t},content(t){const{originInstance:n,infoWindow:e}=this;t&&e?n.showInfoWindow():n.hideInfoWindow(),n._opts.defaultContent=t,n._overlay&&n._overlay.setHtml(t)},autoView(t){const{originInstance:n,content:e}=this;n._opts.autoView=t},rotation(t){const{originInstance:n,content:e}=this;n._opts.enableRotation=t},infoWindow(t){const{originInstance:n,content:e}=this;n&&t&&e?n.showInfoWindow():n.hideInfoWindow()},play(t){const{originInstance:n}=this;t&&n?n.start():!this._isEnd&&n.pause()}},methods:{load(){const{BMap:t,map:n,path:e,landmarkPois:s,icon:c,speed:h,content:i,autoView:r,rotation:o,infoWindow:a,play:d}=this,p=this.originInstance=new ze(n,e,{enableRotation:o,landmarkPois:s,showInfoWindow:a,defaultContent:i,icon:c&&H(t,c),speed:h,autoView:r,onstart:m=>{this._isEnd=!1,this.$emit("start",m)},onstop:m=>{this._isEnd=!0,this.$emit("stop",m)},onpause:m=>this.$emit("pause",m),onmove:m=>this.$emit("move",m)});d&&e.length&&p.start(this),e.length&&(i&&a?p.showInfoWindow():p.hideInfoWindow())}}};var Wt={exports:{}};(function(t,n){(function(e,s){t.exports=s()})(j,function(){function e(h,i,r){var o,a,d=h.prototype,p=new Function;p.prototype=i.prototype,a=h.prototype=new p;for(o in d)a[o]=d[o];h.prototype.constructor=h,h.superClass=i.prototype,typeof r=="string"&&(a._className=r)}var s=function(){var h=function(a){var d={data:[],heatmap:a};this.max=1,this.get=function(p){return d[p]},this.set=function(p,m){d[p]=m}};h.prototype={addDataPoint:function(o,a){if(!(o<0||a<0)){var d=this,p=d.get("heatmap"),m=d.get("data");if(m[o]||(m[o]=[]),m[o][a]||(m[o][a]=0),m[o][a]+=arguments.length<3?1:arguments[2],d.set("data",m),d.max<m[o][a]){p.get("actx").clearRect(0,0,p.get("width"),p.get("height")),d.setDataSet({max:m[o][a],data:m},!0);return}p.drawAlpha(o,a,m[o][a],!0)}},setDataSet:function(o,a){var d=this,p=d.get("heatmap"),m=[],l=o.data,f=l.length;if(p.clear(),this.max=o.max,p.get("legend")&&p.get("legend").update(o.max),a!=null&&a){for(var y in l)if(y!==void 0)for(var _ in l[y])_!==void 0&&p.drawAlpha(y,_,l[y][_],!1)}else for(;f--;){var g=l[f];p.drawAlpha(g.x,g.y,g.count,!1),m[g.x]||(m[g.x]=[]),m[g.x][g.y]||(m[g.x][g.y]=0),m[g.x][g.y]=g.count}p.colorize(),this.set("data",l)},exportDataSet:function(){var o=this,a=o.get("data"),d=[];for(var p in a)if(p!==void 0)for(var m in a[p])m!==void 0&&d.push({x:parseInt(p,10),y:parseInt(m,10),count:a[p][m]});return{max:o.max,data:d}},generateRandomDataSet:function(o){var a=this.get("heatmap"),d=a.get("width"),p=a.get("height"),m={},l=Math.floor(Math.random()*1e3+1);m.max=l;for(var f=[];o--;)f.push({x:Math.floor(Math.random()*d+1),y:Math.floor(Math.random()*p+1),count:Math.floor(Math.random()*l+1)});m.data=f,this.setDataSet(m)}};var i=function(a){this.config=a;var d={element:null,labelsEl:null,gradientCfg:null,ctx:null};this.get=function(p){return d[p]},this.set=function(p,m){d[p]=m},this.init()};i.prototype={init:function(){var o=this,a=o.config,d=a.title||"Legend",p=a.position,m=a.offset||10;a.gradient;var l=document.createElement("ul"),f,y,_="";o.processGradientObject(),p.indexOf("t")>-1?_+="top:"+m+"px;":_+="bottom:"+m+"px;",p.indexOf("l")>-1?_+="left:"+m+"px;":_+="right:"+m+"px;",f=document.createElement("div"),f.style.cssText="border-radius:5px;position:absolute;"+_+"font-family:Helvetica; width:256px;z-index:10000000000; background:rgba(255,255,255,1);padding:10px;border:1px solid black;margin:0;",f.innerHTML="<h3 style='padding:0;margin:0;text-align:center;font-size:16px;'>"+d+"</h3>",l.style.cssText="position:relative;font-size:12px;display:block;list-style:none;list-style-type:none;margin:0;height:15px;",y=document.createElement("div"),y.style.cssText=["position:relative;display:block;width:256px;height:15px;border-bottom:1px solid black; background-image:url(",o.createGradientImage(),");"].join(""),f.appendChild(l),f.appendChild(y),o.set("element",f),o.set("labelsEl",l),o.update(1)},processGradientObject:function(){var o=this,a=this.config.gradient,d=[];for(var p in a)a.hasOwnProperty(p)&&d.push({stop:p,value:a[p]});d.sort(function(m,l){return m.stop-l.stop}),d.unshift({stop:0,value:"rgba(0,0,0,0)"}),o.set("gradientArr",d)},createGradientImage:function(){var o=this,a=o.get("gradientArr"),d=a.length,p=document.createElement("canvas"),m=p.getContext("2d"),l;p.width="256",p.height="15",l=m.createLinearGradient(0,5,256,10);for(var f=0;f<d;f++)l.addColorStop(1/(d-1)*f,a[f].value);m.fillStyle=l,m.fillRect(0,5,256,10),m.strokeStyle="black",m.beginPath();for(var f=0;f<d;f++)m.moveTo((1/(d-1)*f*256>>0)+.5,0),m.lineTo((1/(d-1)*f*256>>0)+.5,f==0?15:5);return m.moveTo(255.5,0),m.lineTo(255.5,15),m.moveTo(255.5,4.5),m.lineTo(0,4.5),m.stroke(),o.set("ctx",m),p.toDataURL()},getElement:function(){return this.get("element")},update:function(o){for(var a=this,d=a.get("gradientArr"),p=a.get("ctx"),m=a.get("labelsEl"),l,f="",y,_=0;_<d.length;_++)l=o*d[_].stop>>0,y=p.measureText(l).width/2>>0,_==0&&(y=0),_==d.length-1&&(y*=2),f+='<li style="position:absolute;left:'+(((1/(d.length-1)*_*256||0)>>0)-y+.5)+'px">'+l+"</li>";m.innerHTML=f}};var r=function(a){var d={radius:40,element:{},canvas:{},acanvas:{},ctx:{},actx:{},legend:null,visible:!0,width:0,height:0,max:!1,gradient:!1,opacity:180,premultiplyAlpha:!1,bounds:{l:1e3,r:0,t:1e3,b:0},debug:!1};this.store=new h(this),this.get=function(p){return d[p]},this.set=function(p,m){d[p]=m},this.configure(a),this.init()};return r.prototype={configure:function(o){var a=this;if(a.set("radius",o.radius||40),a.set("element",o.element instanceof Object?o.element:document.getElementById(o.element)),a.set("visible",o.visible!=null?o.visible:!0),a.set("max",o.max||!1),a.set("gradient",o.gradient||{.45:"rgb(0,0,255)",.55:"rgb(0,255,255)",.65:"rgb(0,255,0)",.95:"yellow",1:"rgb(255,0,0)"}),a.set("opacity",parseInt(255/(100/o.opacity),10)||180),a.set("width",o.width||0),a.set("height",o.height||0),a.set("debug",o.debug),o.legend){var d=o.legend;d.gradient=a.get("gradient"),a.set("legend",new i(d))}},resize:function(){var o=this,a=o.get("element"),d=o.get("canvas"),p=o.get("acanvas");d.width=p.width=o.get("width")||a.style.width.replace(/px/,"")||o.getWidth(a),this.set("width",d.width),d.height=p.height=o.get("height")||a.style.height.replace(/px/,"")||o.getHeight(a),this.set("height",d.height)},init:function(){var o=this,a=document.createElement("canvas"),d=document.createElement("canvas"),p=a.getContext("2d"),m=d.getContext("2d"),l=o.get("element");o.initColorPalette(),o.set("canvas",a),o.set("ctx",p),o.set("acanvas",d),o.set("actx",m),o.resize(),a.style.cssText=d.style.cssText="position:absolute;top:0;left:0;z-index:10000000;",o.get("visible")||(a.style.display="none"),l.appendChild(a),o.get("legend")&&l.appendChild(o.get("legend").getElement()),o.get("debug")&&document.body.appendChild(d),m.shadowOffsetX=15e3,m.shadowOffsetY=15e3,m.shadowBlur=15},initColorPalette:function(){var o=this,a=document.createElement("canvas"),d=o.get("gradient"),p,m,l;a.width="1",a.height="256",p=a.getContext("2d"),m=p.createLinearGradient(0,0,1,256),l=p.getImageData(0,0,1,1),l.data[0]=l.data[3]=64,l.data[1]=l.data[2]=0,p.putImageData(l,0,0),l=p.getImageData(0,0,1,1),o.set("premultiplyAlpha",l.data[0]<60||l.data[0]>70);for(var f in d)m.addColorStop(f,d[f]);p.fillStyle=m,p.fillRect(0,0,1,256),o.set("gradient",p.getImageData(0,0,1,256).data)},getWidth:function(o){var a=o.offsetWidth;return o.style.paddingLeft&&(a+=o.style.paddingLeft),o.style.paddingRight&&(a+=o.style.paddingRight),a},getHeight:function(o){var a=o.offsetHeight;return o.style.paddingTop&&(a+=o.style.paddingTop),o.style.paddingBottom&&(a+=o.style.paddingBottom),a},colorize:function(o,a){var d=this,p=d.get("width"),m=d.get("radius"),l=d.get("height"),f=d.get("actx"),y=d.get("ctx"),_=m*3,g=d.get("premultiplyAlpha"),B=d.get("gradient"),O=d.get("opacity"),P=d.get("bounds"),I,u,v,b,C,k,T,S,$;o!=null&&a!=null?(o+_>p&&(o=p-_),o<0&&(o=0),a<0&&(a=0),a+_>l&&(a=l-_),I=o,u=a,b=o+_,v=a+_):(P.l<0?I=0:I=P.l,P.r>p?b=p:b=P.r,P.t<0?u=0:u=P.t,P.b>l?v=l:v=P.b),C=f.getImageData(I,u,b-I,v-u),k=C.data.length;for(var L=3;L<k;L+=4)T=C.data[L],S=T*4,!!S&&($=T<O?T:O,C.data[L-3]=B[S],C.data[L-2]=B[S+1],C.data[L-1]=B[S+2],g&&(C.data[L-3]/=255/$,C.data[L-2]/=255/$,C.data[L-1]/=255/$),C.data[L]=$);y.putImageData(C,I,u)},drawAlpha:function(o,a,d,p){var m=this,l=m.get("radius"),f=m.get("actx");m.get("max");var y=m.get("bounds"),_=o-1.5*l>>0,g=a-1.5*l>>0,B=o+1.5*l>>0,O=a+1.5*l>>0;f.shadowColor="rgba(0,0,0,"+(d?d/m.store.max:"0.1")+")",f.shadowOffsetX=15e3,f.shadowOffsetY=15e3,f.shadowBlur=15,f.beginPath(),f.arc(o-15e3,a-15e3,l,0,Math.PI*2,!0),f.closePath(),f.fill(),p?m.colorize(_,g):(_<y.l&&(y.l=_),g<y.t&&(y.t=g),B>y.r&&(y.r=B),O>y.b&&(y.b=O))},toggleDisplay:function(){var o=this,a=o.get("visible"),d=o.get("canvas");a?d.style.display="none":d.style.display="block",o.set("visible",!a)},getImageData:function(){return this.get("canvas").toDataURL()},clear:function(){var o=this,a=o.get("width"),d=o.get("height");o.store.set("data",[]),o.get("ctx").clearRect(0,0,a,d),o.get("actx").clearRect(0,0,a,d)},cleanup:function(){var o=this;o.get("element").removeChild(o.get("canvas"))}},{create:function(o){return new r(o)},util:{mousePosition:function(o){var a,d;if(o.layerX?(a=o.layerX,d=o.layerY):o.offsetX&&(a=o.offsetX,d=o.offsetY),typeof a!="undefined")return[a,d]}}}}(),c=function(h){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}if(!c._isExtended){c._isExtended=!0,e(c,BMap.Overlay,"HeatmapOverlay");var i=new c(h);this.__proto__=i.__proto__}this.conf=h,this.heatmap=null,this.latlngs=[],this.bounds=null,this._moveendHandler=this._moveendHandler.bind(this)};return c.prototype.initialize=function(h){this._map=h;var i=document.createElement("div");return i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.border=0,i.style.width=this._map.getSize().width+"px",i.style.height=this._map.getSize().height+"px",this.conf.element=i,h.getPanes().mapPane.appendChild(i),this.heatmap=s.create(this.conf),this._div=i,i},c.prototype.draw=function(){var h=this._map.getBounds();if(!h.equals(this.bounds)){this.bounds=h;var i=this._map.pointToOverlayPixel(h.getNorthEast()),r=this._map.pointToOverlayPixel(h.getSouthWest());if(!(!i||!r)){var o=i.y,a=r.x,d=r.y-i.y,p=i.x-r.x;if(this.conf.element.style.left=a+"px",this.conf.element.style.top=o+"px",this.conf.element.style.width=p+"px",this.conf.element.style.height=d+"px",this.heatmap.store.get("heatmap").resize(),this.latlngs.length>0){this.heatmap.clear();for(var m=this.latlngs.length,l={max:this.heatmap.store.max,data:[]};m--;){var f=this.latlngs[m].latlng;if(!!h.containsPoint(f)){var y=this._map.pointToOverlayPixel(f),_=new BMap.Pixel(y.x-a,y.y-o),g=this.pixelTransform(_);l.data.push({x:g.x,y:g.y,count:this.latlngs[m].c})}}this.heatmap.store.setDataSet(l)}}}},c.prototype.pixelTransform=function(h){for(var i=this.heatmap.get("width"),r=this.heatmap.get("height");h.x<0;)h.x+=i;for(;h.x>i;)h.x-=i;for(;h.y<0;)h.y+=r;for(;h.y>r;)h.y-=r;return h.x=h.x>>0,h.y=h.y>>0,h},c.prototype._moveendHandler=function(h){this.setDataSet(this._data),delete this._data,this._map.removeEventListener("moveend",this._moveendHandler)},c.prototype.setDataSet=function(h){if(!!this._map){var i=this._map.getBounds(),r=this._map.pointToOverlayPixel(i.getNorthEast()),o=this._map.pointToOverlayPixel(i.getSouthWest());(!r||!o)&&(this._data=h,this._map.addEventListener("moveend",this._moveendHandler));var a={max:h.max,data:[]},d=h.data,p=d.length;for(this.latlngs=[];p--;){var m=new BMap.Point(d[p].lng,d[p].lat);if(this.latlngs.push({latlng:m,c:d[p].count}),!!i.containsPoint(m)){var l=this._map.pointToOverlayPixel(m),f=this._map.pointToOverlayPixel(i.getSouthWest()).x,y=this._map.pointToOverlayPixel(i.getNorthEast()).y,_=new BMap.Pixel(l.x-f,l.y-y),g=this.pixelTransform(_);a.data.push({x:g.x,y:g.y,count:d[p].count})}}this.heatmap.clear(),this.heatmap.store.setDataSet(a)}},c.prototype.addDataPoint=function(h,i,r){var o=new BMap.Point(h,i),a=this.pixelTransform(this._map.pointToOverlayPixel(o));this.heatmap.store.addDataPoint(a.x,a.y,r),this.latlngs.push({latlng:o,c:r})},c.prototype.toggle=function(){this.heatmap.toggleDisplay()},c})})(Wt);var De=Wt.exports;const We={name:"bml-heatmap",render(){},mixins:[x("overlay")],props:{data:{type:Array,default:Array},max:{type:Number},radius:{type:Number},gradient:{type:Object},opacity:{type:Number}},watch:{data:{handler(){this.reload()},deep:!0},max(){this.reload()},radius(t){const{originInstance:n,opacity:e,gradient:s}=this;n.setOptions({radius:t,opacity:e,gradient:s})},gradient:{handler(t){const{originInstance:n,radius:e,opacity:s}=this;n.setOptions({radius:e,opacity:s,gradient:t})},deep:!0},opacity(t){const{originInstance:n,radius:e,gradient:s}=this;n.setOptions({radius:e,opacity:t,gradient:s})}},methods:{load(){const{map:t,data:n,max:e,radius:s,opacity:c,gradient:h}=this,i=this.originInstance=new De({radius:s,opacity:c,gradient:h});t.addOverlay(i),i.setDataSet({data:n,max:e})}}};var Nt={exports:{}};(function(t,n){(function(e,s){t.exports=s()})(j,function(){function e(h,i){try{BMap}catch{throw Error("Baidu Map JS API is not ready yet!")}var r=s(h),o=new BMap.Polyline(r,i);return o.addEventListener("lineupdate",function(){this.isEditing&&this.enableEditing()}),o.cornerPoints=h,o.editMarkers=[],o.enableEditing=function(){var a=this;if(a.map){a.disableEditing();for(var d=0;d<a.cornerPoints.length;d++){var p=new BMap.Marker(a.cornerPoints[d],{icon:new BMap.Icon("http://api.map.baidu.com/library/CurveLine/1.5/src/circle.png",new BMap.Size(16,16)),enableDragging:!0,raiseOnDrag:!0});p.addEventListener("dragend",function(){a.cornerPoints.length=0;for(var m=0;m<a.editMarkers.length;m++)a.cornerPoints.push(a.editMarkers[m].getPosition());var l=s(a.cornerPoints);a.setPath(l)}),p.index=d,a.editMarkers.push(p),a.map.addOverlay(p)}}a.isEditing=!0},o.disableEditing=function(){this.isEditing=!1;for(var a=0;a<this.editMarkers.length;a++)this.map.removeOverlay(this.editMarkers[a]),this.editMarkers[a]=null;this.editMarkers.length=0},o.getPath=function(){return r},o}function s(h){for(var i=[],r=0;r<h.length-1;r++){var o=c(h[r],h[r+1]);o&&o.length>0&&(i=i.concat(o))}return i}function c(h,i){var r=[];if(!h||!i||!(h instanceof BMap.Point)||!(i instanceof BMap.Point))return null;var o=function(b){return 1-2*b+b*b},a=function(b){return 2*b-2*b*b},d=function(b){return b*b},p=30,m,l,f,y,_,g,B=0,O=0;if(typeof i=="undefined"){typeof r!="undefined"&&(r=[]);return}var P=parseFloat(h.lat),I=parseFloat(i.lat),u=parseFloat(h.lng),v=parseFloat(i.lng);for(v>u&&parseFloat(v-u)>180&&u<0&&(u=parseFloat(180+180+u)),u>v&&parseFloat(u-v)>180&&v<0&&(v=parseFloat(180+180+v)),g=0,I==P?(m=0,l=u-v):v==u?(m=Math.PI/2,l=P-I):(m=Math.atan((I-P)/(v-u)),l=(I-P)/Math.sin(m)),g==0&&(g=m+Math.PI/5),f=l/2,_=f*Math.cos(g)+u,y=f*Math.sin(g)+P,B=0;B<p+1;B++)r.push(new BMap.Point(u*o(O)+_*a(O)+v*d(O),P*o(O)+y*a(O)+I*d(O))),O=O+1/p;return r}return e})})(Nt);var Ne=Nt.exports;const Re=["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],Ze={name:"bml-curve-line",render(){},mixins:[x("overlay")],props:{points:{type:Array,default:Array},strokeColor:{type:String},strokeWeight:{type:Number},strokeOpacity:{type:Number},strokeStyle:{type:String},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1}},watch:{points:{handler(t,n){this.originInstance.disableEditing(),this.reload()},deep:!0},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},editing(t){t?this.originInstance.enableEditing():this.originInstance.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},methods:{load(){const{BMap:t,map:n,points:e,strokeColor:s,strokeWeight:c,strokeOpacity:h,strokeStyle:i,editing:r,massClear:o,clicking:a}=this,d=new Ne(e.map(p=>E(t,p)),{strokeColor:s,strokeWeight:c,strokeOpacity:h,strokeStyle:i,enableMassClear:o,enableClicking:a});r?d.enableEditing():d.disableEditing(),this.originInstance=d,n.addOverlay(d),W.call(this,d,Re)}}},it=()=>new Promise(t=>{qt().then(n=>{t(n)})});let Y;const je=()=>new Promise(t=>{Y?t(Y):it().then(n=>{Y=new n.Geocoder,t(Y)})}),He=(t,n)=>new Promise(e=>{it().then(s=>{const c=new s.Point(t,n);e(c)})});var Ge={install(t,n={}){st(n),t.component("baidu-map",lt),t.component("bm-scale",ct),t.component("bm-navigation",ht),t.component("bm-map-type",dt),t.component("bm-overview-map",pt),t.component("bm-geolocation",ut),t.component("bm-copyright",mt),t.component("bm-city-list",gt),t.component("bm-panorama",ft),t.component("bm-control",yt),t.component("bm-marker",vt),t.component("bm-point-collection",_t),t.component("bm-polyline",bt),t.component("bm-polygon",nt),t.component("bm-circle",wt),t.component("bm-ground",Ct),t.component("bm-label",kt),t.component("bm-info-window",Bt),t.component("bm-overlay",Mt),t.component("bm-context-menu",It),t.component("bm-context-menu-item",St),t.component("bm-local-search",xt),t.component("bm-transit",Ot),t.component("bm-walking",Et),t.component("bm-driving",$t),t.component("bm-bus",Pt),t.component("bm-tile",Tt),t.component("bm-traffic",At),t.component("bm-auto-complete",zt),t.component("bm-boundary",Lt)}};M.BaiduMap=lt,M.BmAutoComplete=zt,M.BmBoundary=Lt,M.BmBus=Pt,M.BmCircle=wt,M.BmCityList=gt,M.BmContextMenu=It,M.BmContextMenuItem=St,M.BmControl=yt,M.BmCopyright=mt,M.BmDriving=$t,M.BmGeolocation=ut,M.BmGround=Ct,M.BmInfoWindow=Bt,M.BmLabel=kt,M.BmLocalSearch=xt,M.BmMapType=dt,M.BmMarker=vt,M.BmNavigation=ht,M.BmOverlay=Mt,M.BmOverviewMap=pt,M.BmPanorama=ft,M.BmPointCollection=_t,M.BmPolygon=nt,M.BmPolyline=bt,M.BmScale=ct,M.BmTile=Tt,M.BmTraffic=At,M.BmTransit=Ot,M.BmWalking=Et,M.BmlCurveLine=Ze,M.BmlHeatmap=We,M.BmlLushu=Fe,M.BmlMarkerClusterer=Le,M.default=Ge,M.getAddressByPoints=Xt,M.getConfig=N,M.getPointByAddress=Kt,M.getPointsTransfer=Jt,M.useGeocoder=je,M.useMap=it,M.usePoint=He,Object.defineProperty(M,"__esModule",{value:!0}),M[Symbol.toStringTag]="Module"});
